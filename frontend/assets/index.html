<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FanScout App</title>
    <style>
        /* Root variables */
        :root {
            --color-primary: #007AFF;
            --color-text-primary: #000;
            --color-text-secondary: #8E8E93;
            --color-text-light: #C7C7CC;
            --color-background: #F2F2F7;
            --color-card-bg: #FFFFFF;
            --color-border: #E5E5EA;
            --color-success: #34C759;
            --color-danger: #FF3B30;
            --color-pill-active: #000;
            --color-pill-inactive: #F2F2F7;
            --chart-blue: #007AFF;
            --color-activity-dot: #FE2C55;
        }

        /* Hide modal overlay by default */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-overlay.active {
            display: flex;
        }

        /* Hide all modals by default */
        .modal,
        .chat-modal,
        #priceHistoryModal,
        #athleteDetailModal,
        #offerModal,
        #chatModal,
        #profileSettingsModal,
        #newMessageModal {
            display: none;
        }
        .modal.active,
        .chat-modal.active,
        #priceHistoryModal.active,
        #athleteDetailModal.active,
        #offerModal.active,
        #chatModal.active,
        #profileSettingsModal.active,
        #newMessageModal.active {
            display: block;
        }
        /* Exception for athlete search modal inner content */
        #athleteSearchModal .modal {
            display: block !important;
        }
        }

        /* Base styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text-primary);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* Main container */
        .app-container {
            max-width: none;
            margin: 0;
            display: flex;
            flex-direction: row;
            background-color: var(--color-background);
            height: 100vh;
            width: 100vw;
            overflow: visible;
        }

        /* Desktop Layout */
        @media (min-width: 768px) {
            body {
                align-items: stretch;
            }
            
            .app-container {
                max-width: none;
                margin: 0;
                display: flex;
                flex-direction: row;
                background-color: var(--color-background);
                height: 100vh;
                width: 100vw;
                overflow: visible;
            }
            
            /* Desktop Sidebar */
            .desktop-sidebar {
                width: 280px;
                background-color: var(--color-card-bg);
                border-right: 1px solid var(--color-border);
                padding: 24px 0;
                display: flex;
                flex-direction: column;
                position: fixed;
                height: 100vh;
                left: 0;
                top: 0;
                overflow-y: auto;
            }
            
            .desktop-sidebar .sidebar-header {
                padding: 0 24px 32px;
                border-bottom: 1px solid var(--color-border);
                margin-bottom: 32px;
            }
            
            .desktop-sidebar .sidebar-logo {
                font-size: 28px;
                font-weight: 700;
                color: var(--color-primary);
                letter-spacing: -0.5px;
            }
            
            .desktop-sidebar .sidebar-nav {
                flex: 1;
                padding: 0 16px;
            }
            
            .desktop-sidebar .sidebar-nav-item {
                display: flex;
                align-items: center;
                padding: 12px 16px;
                margin-bottom: 14px; /* Increased from 4px to 14px for extra spacing */
                border-radius: 12px;
                cursor: pointer;
                transition: all 0.2s ease;
                color: var(--color-text-secondary);
                font-weight: 500;
                font-size: 16px;
                border: none;
                background: none;
                width: 100%;
                text-align: left;
            }
            
            .desktop-sidebar .sidebar-nav-item:hover {
                background-color: var(--color-background);
                color: var(--color-text-primary);
            }
            
            .desktop-sidebar .sidebar-nav-item.active {
                background-color: var(--color-primary);
                color: white;
            }
            
            .desktop-sidebar .sidebar-nav-icon {
                width: 20px;
                height: 20px;
                margin-right: 12px;
                opacity: 0.8;
            }
            
            .desktop-sidebar .sidebar-nav-item.active .sidebar-nav-icon {
                opacity: 1;
            }
            
            .desktop-sidebar .sidebar-nav-text {
                font-size: 16px;
                font-weight: 500;
            }
            
            .desktop-sidebar .sidebar-title {
                font-size: 28px;
                font-weight: 700;
                color: var(--color-primary);
                letter-spacing: -0.5px;
            }
            
            .desktop-sidebar .sidebar-divider {
                height: 1px;
                background-color: var(--color-border);
                margin: 16px 16px;
            }
            
            /* Desktop Main Content */
            .main-content-area {
                flex: 1;
                margin-left: 280px;
                padding: 24px 32px;
                background-color: var(--color-background);
                height: 100vh;
                overflow-y: auto;
            }
            
            .main-content-area .header {
                background: transparent;
                padding: 0 0 24px;
                border-bottom: 1px solid var(--color-border);
                margin-bottom: 32px;
            }
            
            .main-content-area .header-title {
                font-size: 32px;
                text-align: left;
            }
            
            .main-content-area .page-content {
                min-height: auto;
                padding-bottom: 0;
                background: transparent;
            }
            
            /* Hide mobile bottom nav on desktop */
            .bottom-nav {
                display: none;
            }
            
            /* Desktop Grid Layouts */
            .desktop-grid {
                display: grid;
                gap: 24px;
            }
            
            .desktop-grid-2 {
                grid-template-columns: 1fr 1fr;
            }
            
            .desktop-grid-3 {
                grid-template-columns: 1fr 1fr 1fr;
            }
            
            .desktop-grid-auto {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
            
            /* Desktop Cards */
            .desktop-card {
                background: var(--color-card-bg);
                border-radius: 16px;
                padding: 24px;
                border: 1px solid var(--color-border);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
                transition: all 0.2s ease;
            }
            
            .desktop-card:hover {
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
                transform: translateY(-2px);
            }
            
            /* Desktop Athlete Grid */
            .athletes-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
            }
            
            .athlete-card {
                transition: all 0.2s ease;
            }
            
            .athlete-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            }
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            background: var(--color-card-bg);
        }

        .header-title {
            font-size: 34px;
            font-weight: 700;
            letter-spacing: -0.5px;
            flex: 1;
            text-align: center;
        }

        .header-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            border-radius: 20px;
            background: none;
            color: currentColor;
            cursor: pointer;
            transition: none;
            padding: 0;
            position: relative;
        }
        .header-icon.active, .header-icon:active, .header-icon:hover, .header-icon:focus {
            background: none;
            color: currentColor;
            outline: none;
        }

        .header-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
        }

        /* Page content */
        .page-content {
            display: none;
            padding-bottom: 83px;
            background: var(--color-card-bg);
            min-height: 100vh; /* Changed from calc */
            overflow-y: auto;
            border-radius: 12px;
        }

        .page-content.active {
            display: block;
        }

        /* Pills */
        .pills-container {
            display: flex;
            gap: 12px;
            padding: 0 20px 16px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .pills-container::-webkit-scrollbar {
            display: none;
        }

        .pill {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 15px;
            font-weight: 500;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s ease;
            background: var(--color-pill-inactive);
            color: var(--color-text-primary);
            border: none;
        }

        .pill.active {
            background: var(--color-pill-active);
            color: white;
        }

        /* Cards */
        .card {
            background: var(--color-card-bg);
            border-radius: 10px;
            padding: 16px;
            margin: 0 20px 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        /* Stats cards */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            padding: 0 20px 16px;
        }

        .stat-card {
            background: var(--color-card-bg);
            border-radius: 10px;
            padding: 16px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            font-size: 13px;
            color: var(--color-text-secondary);
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-change {
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .stat-change.positive {
            color: var(--color-success);
        }

        .stat-change.negative {
            color: var(--color-danger);
        }

        .stat-change.neutral {
            color: var(--color-text-secondary);
        }

        /* Portfolio chart */
        .chart-container {
            position: relative;
            height: 200px;
            margin-bottom: 16px;
            display: flex;
            gap: 8px;
        }

        .y-axis {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: 11px;
            color: var(--color-text-secondary);
            width: 40px;
            text-align: right;
            padding-right: 4px;
        }

        .chart-labels {
            display: flex;
            justify-content: space-between;
            padding: 0 4px 0 48px;
            margin-top: 8px;
        }


        /* Prospects list */
        .prospects-list {
            display: flex;
            flex-direction: column;
            gap: 0; /* Remove gap as border acts as separator */
            padding-top: 8px; /* Add some top padding to move prospects down */
        }

        .prospect-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--color-border);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .prospect-item:hover {
            background: var(--color-background);
            margin: 0 -16px;
            padding: 12px 16px;
        }

        .prospect-item:last-child {
            border-bottom: none;
        }

        .prospect-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        .prospect-info {
            flex: 1;
            min-width: 0;
        }

        .prospect-name {
            font-size: 17px;
            font-weight: 600;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .prospect-details {
            font-size: 13px;
            color: var(--color-text-secondary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .prospect-price {
            font-size: 17px;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        /* Search bar */
        .search-container {
            padding: 8px 20px 16px;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: var(--color-pill-inactive);
            border: 1px solid var(--color-border);
            border-radius: 10px;
            padding: 8px 12px;
            gap: 8px;
        }

        .search-icon {
            width: 20px;
            height: 20px;
            opacity: 0.5;
        }

        .search-input {
            flex: 1;
            border: none;
            background: none;
            outline: none;
            font-size: 17px;
            color: var(--color-text-primary);
        }

        .search-input::placeholder {
            color: var(--color-text-secondary);
        }

        .create-post-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            margin-left: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background-color 0.2s ease;
        }

        .create-post-btn:hover {
            background: var(--color-secondary);
        }

        /* Create Post Modal */
        #createPostModal textarea {
            background: var(--color-background);
            color: var(--color-text-primary);
        }

        #createPostModal textarea::placeholder {
            color: var(--color-text-secondary);
        }

        #createPostModal .media-upload-container button {
            transition: border-color 0.2s ease;
        }

        #createPostModal .media-upload-container button:hover {
            border-color: var(--color-primary);
        }

        /* Comment Reply Styles */
        .comment-reply-btn {
            background: none;
            border: none;
            color: var(--color-text-secondary);
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            margin-left: 8px;
        }

        .comment-reply-btn:hover {
            color: var(--color-primary);
        }

        .reply-input-container {
            margin-top: 8px;
            padding: 8px 0;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .replies-container {
            border-left: 2px solid var(--color-border);
            padding-left: 16px;
        }

        .reply-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 12px;
        }

        .reply-item .comment-avatar {
            width: 32px !important;
            height: 32px !important;
        }

        .reply-input {
            background: var(--color-background);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
            border-radius: 20px;
            padding: 8px 16px;
            outline: none;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }

        .reply-input:focus {
            border-color: var(--color-primary);
            outline: none;
        }

        .reply-input::placeholder {
            color: var(--color-text-secondary);
        }

        .toggle-replies-btn {
            background: none;
            border: none;
            color: var(--color-text-secondary);
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            margin-left: 8px;
        }

        .toggle-replies-btn:hover {
            color: var(--color-primary);
        }

        .toggle-replies-btn svg {
            transition: transform 0.2s ease;
        }

        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--color-primary);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 11px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .tab-item {
            position: relative;
        }

        .filter-icon {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }

        /* Banner carousel */
        /* Removed all carousel-related CSS rules */

        /* Sports grid */
        .sports-grid {
            display: flex;
            gap: 16px;
            padding: 0 20px 16px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .sports-grid::-webkit-scrollbar {
            display: none;
        }

        .sport-item {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-radius: 12px;
            justify-content: flex-start;
        }
        
        .sport-item.active-sport {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }

        .sport-icon {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .sport-name {
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Athletes grid */
        .athletes-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            padding: 0 20px 16px;
        }

        .athlete-card {
            background: var(--color-card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .athlete-card:hover {
            transform: translateY(-2px);
        }

        .athlete-image {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
        }

        .athlete-info {
            padding: 12px;
        }

        .athlete-position {
            font-size: 11px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 2px;
        }

        .athlete-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .athlete-price {
            font-size: 13px;
            color: var(--color-text-primary);
        }

        /* Section headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px 12px;
        }

        .section-title {
            font-size: 22px;
            font-weight: 700;
        }


        /* Offers list */
        .offers-list {
            padding: 0 20px;
        }

        .offer-item {
            background: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .offer-header {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .offer-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .offer-info {
            flex: 1;
            min-width: 0;
        }

        .offer-position {
            font-size: 13px;
            color: var(--color-text-secondary);
            margin-bottom: 2px;
        }

        .offer-name {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .offer-quantity {
            font-size: 15px;
            color: var(--color-text-secondary);
        }

        .offer-price-label {
            font-size: 13px;
            color: var(--color-text-secondary);
            text-align: right;
            margin-bottom: 2px;
        }

        .offer-price {
            font-size: 20px;
            font-weight: 700;
            text-align: right;
        }

        .offer-button {
            background: var(--color-pill-active);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 24px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 12px;
            width: 100%;
        }

        /* Activities styles */
        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px 20px;
            border-bottom: 1px solid var(--color-border);
            position: relative;
        }

        .activity-dot {
            position: absolute;
            left: 8px;
            top: 28px;
            width: 8px;
            height: 8px;
            background: var(--color-activity-dot);
            border-radius: 50%;
        }

        .activity-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
        }
        .activity-item.has-dot .activity-avatar {
             margin-left: 16px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-header {
            display: flex;
            align-items: baseline;
            gap: 4px;
            margin-bottom: 2px;
        }

        .activity-username {
            font-size: 15px;
            font-weight: 600;
        }

        .activity-time {
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .activity-text {
            font-size: 15px;
            color: var(--color-text-secondary);
        }

        .activity-comment {
            font-size: 15px;
            color: var(--color-text-primary);
            margin-top: 4px;
        }

        .activity-quote {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
        }

        .quote-line {
            width: 3px;
            min-height: 20px;
            background: var(--color-border);
            border-radius: 3px;
        }

        .quote-text {
            font-size: 15px;
            color: var(--color-text-secondary);
        }

        .activity-button {
            background: var(--color-pill-inactive);
            border: none;
            border-radius: 20px;
            padding: 6px 16px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            flex-shrink: 0;
            margin-left: auto;
        }

        .activity-image {
            width: 72px;
            height: 72px;
            border-radius: 8px;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin-left: auto;
        }

        .activity-image:hover {
            transform: scale(1.05);
        }

        /* Modal */
        .modal {
            background: var(--color-card-bg);
            border-radius: 10px;
            padding: 20px;
            max-width: 400px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1001;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--color-border);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--color-text-secondary);
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            margin-bottom: 20px;
        }

        .auth-modal {
            max-width: 350px;
        }

        .auth-modal input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            font-size: 16px;
            margin-bottom: 16px;
            box-sizing: border-box;
        }

        .auth-modal label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
            color: var(--color-text-primary);
        }

        .auth-modal button[type="submit"] {
            width: 100%;
            padding: 12px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 16px;
        }

        .auth-modal button[type="submit"]:hover {
            background: #0056b3;
        }

        .auth-modal a {
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 500;
        }

        .auth-modal a:hover {
            text-decoration: underline;
        }

        /* Athlete detail modal */
        .athlete-detail-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .athlete-detail-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 12px;
            display: block;
            object-fit: cover;
        }

        .athlete-detail-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .athlete-detail-position {
            font-size: 15px;
            color: var(--color-text-secondary);
            margin-bottom: 8px;
        }

        .athlete-detail-price {
            font-size: 20px;
            font-weight: 600;
            color: var(--color-primary);
        }

        .athlete-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .stat-box {
            text-align: center;
            padding: 12px;
            background: var(--color-background);
            border-radius: 8px;
        }

        .stat-box-value {
            font-size: 20px;
            font-weight: 700;
            display: block;
        }

        .stat-box-label {
            font-size: 12px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
        }

        .athlete-bio {
            margin-top: 20px;
        }

        .athlete-bio h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .athlete-bio p {
            font-size: 15px;
            color: var(--color-text-secondary);
            line-height: 1.5;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .action-button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .action-button.primary {
            background: var(--color-primary);
            color: white;
        }

        .action-button.secondary {
            background: var(--color-background);
            color: var(--color-text-primary);
        }

        /* Image modal */
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            cursor: pointer;
        }

        .image-modal.active {
            display: flex;
        }

        .image-modal img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }
        
        /* Profile Settings Modal */
        .profile-settings-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .profile-picture-section {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--color-border);
        }
        
        .profile-settings-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 16px;
            border: 3px solid var(--color-border);
        }
        
        .change-picture-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }
        
        .change-picture-btn:hover {
            opacity: 0.8;
        }
        
        .profile-settings-form,
        .password-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .form-group label {
            font-weight: 500;
            color: var(--color-text-primary);
            font-size: 14px;
        }
        
        .form-group input {
            padding: 12px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            font-size: 16px;
            background: var(--color-card-bg);
            color: var(--color-text-primary);
            position: relative;
            z-index: 10;
            pointer-events: auto;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--color-primary);
        }
        
        .privacy-setting {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .privacy-label {
            font-size: 14px;
            color: var(--text-primary);
        }
        
        .privacy-help {
            color: var(--text-secondary);
            font-size: 12px;
            line-height: 1.4;
        }
        
        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        
        .btn-primary {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
        }
        
        .btn-secondary {
            background: var(--color-background);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
        }
        
        .btn-primary:hover {
            opacity: 0.8;
        }
        
        .btn-secondary:hover {
            background: var(--color-border);
        }
        
        .password-section {
            padding-top: 20px;
            border-top: 1px solid var(--color-border);
        }
        
        .password-section h4 {
            margin: 0 0 16px 0;
            font-size: 18px;
            font-weight: 600;
            color: var(--color-text-primary);
        }
        
        /* Leaderboard */
        .leaderboard-list { display: flex; flex-direction: column; gap: 8px; }
        .leaderboard-item { display: flex; align-items: center; gap: 12px; padding: 8px; border-radius: 8px; transition: background 0.2s; }
        .leaderboard-item:hover { background: var(--color-background); }
        .leaderboard-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
        .leaderboard-rank { font-size: 16px; font-weight: 700; width: 32px; text-align: center; color: var(--color-text-secondary); }
        .leaderboard-name { flex: 1; font-size: 17px; font-weight: 600; }
        .leaderboard-percent { font-size: 16px; color: var(--color-success); font-weight: 600; }

        .leaderboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .leaderboard-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .timeframe-select {
            background: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--color-text);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }

        .leaderboard-tabs {
            display: flex;
            background: var(--color-background);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 16px;
        }

        .leaderboard-tab {
            flex: 1;
            background: none;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .leaderboard-tab.active {
            background: var(--color-card-bg);
            color: var(--color-text-primary);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .leaderboard-content {
            min-height: 300px;
        }

        .leaderboard-empty {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            color: var(--color-text-secondary);
            text-align: center;
        }

        .leaderboard-percent.negative {
            color: var(--color-danger);
        }

        .leaderboard-percent.positive {
            color: var(--color-success);
        }

        .leaderboard-subtitle {
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-top: 2px;
        }

        .user-position {
            background: var(--color-primary);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            margin-left: auto;
        }

        .loading-state, .error-state {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            color: var(--color-text-secondary);
            text-align: center;
            font-style: italic;
        }

        .error-state {
            color: var(--color-danger);
        }

        .leaderboard-item {
            transition: all 0.2s ease;
        }

        .leaderboard-item:hover {
            background: var(--color-background) !important;
            transform: translateY(-1px);
        }

        .leaderboard-item.current-user {
            font-weight: 600;
        }
        
        /* Tab bar */
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            background: var(--color-card-bg);
            border-top: 1px solid var(--color-border);
            display: flex;
            justify-content: space-around;
            padding: 8px 0 24px;
            z-index: 100;
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
        }

        .tab-icon {
            width: 24px;
            height: 24px;
            opacity: 0.5;
            color: var(--color-text-primary);
        }
        .tab-icon[stroke], .tab-icon[style*="stroke"] {
            stroke: currentColor !important;
        }
        .tab-item.active .tab-icon {
            opacity: 1;
            color: var(--color-primary);
            filter: none;
        }
        .tab-icon[fill="none"][stroke],
        .tab-icon[fill='none'][stroke] {
            filter: none !important;
            opacity: 0.5 !important; /* Match other inactive icons */
        }
        .tab-item.active .tab-icon[fill="none"][stroke],
        .tab-item.active .tab-icon[fill='none'][stroke] {
            opacity: 1 !important; /* Full opacity when active */
        }
        .tab-item.active .tab-icon {
            opacity: 1;
            filter: invert(31%) sepia(98%) saturate(2573%) hue-rotate(198deg) brightness(99%) contrast(101%);
        }

        /* Account page */
        .account-header {
            text-align: center;
            padding: 32px 20px;
        }

        .account-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 16px;
            display: block;
            object-fit: cover;
        }

        .account-name {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .account-email {
            font-size: 17px;
            color: var(--color-text-secondary);
        }

        .account-stats {
            display: flex;
            justify-content: space-around;
            padding: 24px 20px;
            border-top: 1px solid var(--color-border);
            border-bottom: 1px solid var(--color-border);
        }

        .account-stat {
            text-align: center;
        }

        .account-stat-value {
            font-size: 22px;
            font-weight: 700;
            display: block;
        }

        .account-stat-label {
            font-size: 13px;
            color: var(--color-text-secondary);
            margin-top: 2px;
        }

        .account-menu {
            padding: 16px 0;
        }

        .account-menu-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .account-menu-item:hover {
            background: var(--color-pill-inactive);
        }

        .account-menu-label {
            font-size: 17px;
        }

        .account-menu-arrow {
            width: 20px;
            height: 20px;
            opacity: 0.3;
        }

        .account-username {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--color-primary);
        }

        .account-name {
            font-size: 17px;
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--color-text-primary);
        }

        /* User Profile Page */
        .user-profile-page {
            background: var(--color-card-bg);
        }

        .user-profile-header {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid var(--color-border);
            position: relative;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 20px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.2s ease;
        }

        .back-button:hover {
            background: var(--color-background);
        }

        .user-profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 12px;
            display: block;
            object-fit: cover;
        }

        .user-profile-username {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--color-primary);
        }

        .user-profile-name {
            font-size: 16px;
            color: var(--color-text-secondary);
            margin-bottom: 16px;
        }

        .user-profile-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .follow-btn, .message-btn {
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
        }

        .follow-btn {
            background: var(--color-primary);
            color: white;
        }

        .follow-btn.following {
            background: var(--color-border);
            color: var(--color-text-primary);
        }

        .follow-btn:hover {
            opacity: 0.8;
        }

        .message-btn {
            background: var(--color-background);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
        }

        .message-btn:hover {
            background: var(--color-border);
        }

        .user-profile-stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            border-bottom: 1px solid var(--color-border);
        }

        .user-profile-stat {
            text-align: center;
        }

        .user-profile-stat-value {
            font-size: 18px;
            font-weight: 700;
            display: block;
        }

        .user-profile-stat-label {
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-top: 2px;
        }

        .user-profile-tabs {
            display: flex;
            border-bottom: 1px solid var(--color-border);
        }

        .user-profile-tab {
            flex: 1;
            padding: 16px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .user-profile-tab.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .user-profile-tab-content {
            display: none;
            padding: 20px;
        }

        .user-profile-tab-content.active {
            display: block;
        }

        .followers-list, .following-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .user-list-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .user-list-item:hover {
            background: var(--color-background);
        }

        .user-list-item img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-list-item-info {
            flex: 1;
        }

        .user-list-item-username {
            font-weight: 600;
            color: var(--color-primary);
        }

        .user-list-item-name {
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        .clickable-username {
            color: var(--color-primary);
            cursor: pointer;
            text-decoration: none;
            font-weight: 500;
        }

        .clickable-username:hover {
            text-decoration: underline;
        }

        .clickable-stat:hover {
            background: var(--color-background);
            border-radius: 8px;
            transform: translateY(-1px);
            transition: all 0.2s ease;
        }

        /* New Message Modal Styling */
        .new-message-modal .modal-content {
            padding: 20px;
        }

        .new-message-modal label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--color-text-primary);
        }

        .new-message-modal input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 16px;
        }

        .new-message-modal button[type="submit"] {
            width: 100%;
            padding: 12px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 16px;
        }

        .new-message-modal button[type="submit"]:hover {
            background: #0056d3;
        }
        .range-btn-container {
            display: flex;
            justify-content: center;
            background-color: var(--color-pill-inactive);
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 16px;
        }

    .chart-layout-container {
        display: flex;
        gap: 8px;
        height: 150px;
    }
    .y-axis {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        text-align: right;
        font-size: 11px;
        color: var(--color-text-secondary);
        width: 40px;
        flex-shrink: 0;
    }
        .range-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            background: transparent;
            color: var(--color-text-secondary);
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }

        .range-btn.active {
            background-color: var(--color-card-bg);
            color: var(--color-text-primary);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

    .remodel-container {
        padding: 16px;
    }

    .remodel-header {
        margin-bottom: 24px;
    }

    .remodel-price {
        font-size: 32px;
        font-weight: 700;
        line-height: 1;
    }

    .remodel-change {
        font-size: 16px;
        font-weight: 500;
        margin-top: 4px;
    }

    .remodel-change .icon {
        display: inline-block;
        vertical-align: middle;
        width: 16px;
        height: 16px;
        margin-right: 4px;
    }

    .remodel-market-info {
        font-size: 13px;
        color: #8E8E93; /* Secondary text color from your theme */
        margin-top: 8px;
        border-bottom: 1px solid #3a3a3c; /* Dark mode border color */
        padding-bottom: 16px;
    }

    .remodel-range-selector {
        display: flex;
        gap: 8px;
        margin: 16px 0;
    }

    .remodel-range-btn {
        flex: 1;
        padding: 6px;
        border: none;
        background: none;
        color: #8E8E93;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        border-radius: 6px;
        text-align: center;
    }

    .remodel-range-btn.active {
        background-color: #007AFF; /* Using your theme's primary color */
        color: #FFFFFF;
    }

    .positive { color: #34C759; } /* Success color from your theme */
    .negative { color: #FF3B30; } /* Danger color from your theme */
    /*
========================================
FIXED MESSAGES PAGE STYLES
========================================
*/

/* --- Messages Page Header and Search --- */
.messages-page .header {
    border-bottom: 1px solid var(--color-border);
}

.messages-page .new-message-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    margin-top: 12px;
}

.messages-page .new-message-btn:hover {
    background: #0056d3;
}

.user-search-results {
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    margin-top: 8px;
    background: white;
    display: none;
    position: relative;
    z-index: 1001;
}

.user-search-results:not(:empty) {
    display: block;
}

.user-search-result {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    cursor: pointer;
    border-bottom: 1px solid var(--color-border);
}

.user-search-result:last-child {
    border-bottom: none;
}

.user-search-result:hover {
    background: var(--color-background);
}

.user-search-result img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
}

.no-messages {
    text-align: center;
    padding: 40px 20px;
    color: var(--color-text-secondary);
    font-size: 16px;
}

.no-results {
    padding: 12px;
    text-align: center;
    color: var(--color-text-secondary);
}

/* --- Message List Item Layout --- */
.message-item {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    border-bottom: 1px solid var(--color-border);
    cursor: pointer;
}

.message-item:hover {
    background-color: var(--color-background);
}

.message-item:last-child {
    border-bottom: none;
}

.message-avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    object-fit: cover;
}

.message-info {
    flex: 1;
    min-width: 0;
}

.message-name {
    font-size: 17px;
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: 2px;
}

.message-preview {
    font-size: 15px;
    color: var(--color-text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* --- Timestamp & Unread Dot --- */
.message-meta {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 5px;
}

.message-time {
    font-size: 15px;
    color: var(--color-text-secondary);
    white-space: nowrap;
}

.message-unread {
    width: 10px;
    height: 10px;
    background-color: var(--color-primary);
    border-radius: 50%;
}
/* ======================================= */
/* ====== Chat Modal Styling Fix ======= */
/* ======================================= */


/* Chat Modal Container */
.chat-modal {
    background-color: var(--color-card-bg); 
    /* REMOVE THIS LINE: display: flex; */
    flex-direction: column;
    max-height: 90vh; 
}

/* Chat Header */
.chat-header {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--color-border);
    gap: 12px;
    flex-shrink: 0;
}

.chat-back {
    width: 24px;
    height: 24px;
    color: var(--color-primary);
    cursor: pointer;
}

.chat-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
}

.chat-header-info {
    flex: 1;
    min-width: 0;
}

.chat-name {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    color: var(--color-text-primary);
}

.chat-status {
    font-size: 13px;
    color: var(--color-text-secondary);
}
/* Leaderboard */
.leaderboard-list { display: flex; flex-direction: column; gap: 8px; }
.leaderboard-item { display: flex; align-items: center; gap: 12px; padding: 8px; border-radius: 8px; transition: background 0.2s; }
.leaderboard-item:hover { background: var(--color-background); }
.leaderboard-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
.leaderboard-rank { font-size: 16px; font-weight: 700; width: 32px; text-align: center; color: var(--color-text-secondary); }
.leaderboard-name { flex: 1; font-size: 17px; font-weight: 600; }
.leaderboard-percent { font-size: 16px; color: var(--color-success); font-weight: 600; }
.chat-action-icon {
    width: 24px;
    height: 24px;
    color: var(--color-primary);
    stroke-width: 1.5;
}

/* Messages Area */
.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    background-color: var(--color-background); /* Light grey background for message area */
    display: flex;
    flex-direction: column;
    gap: 12px; /* Adds space between message bubbles */
}

/* Individual Message Alignment */
.chat-message {
    display: flex;
    flex-direction: column;
    max-width: 80%;
    word-wrap: break-word;
}

.chat-message.sent {
    align-self: flex-end;
    align-items: flex-end;
}

.chat-message.received {
    align-self: flex-start;
    align-items: flex-start;
}

/* Message Bubble Styling */
.message-bubble {
    padding: 10px 14px;
    border-radius: 18px;
    font-size: 15px;
    line-height: 1.45;
}

.sent .message-bubble {
    background-color: var(--color-primary);
    color: white;
}

.received .message-bubble {
    background-color: var(--color-card-bg);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
}

.message-time {
    font-size: 12px;
    color: var(--color-text-secondary);
    margin-top: 4px;
    padding: 0 4px;
}

/* Offer Card Inside Chat */
.chat-offer-card {
    background: #FFFFFF;
    border-radius: 12px;
    padding: 12px;
    margin-top: 8px;
    border: 1px solid var(--color-border);
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}
.chat-offer-title { font-size: 13px; color: var(--color-text-secondary); margin-bottom: 8px;}
.chat-offer-details { font-size: 15px; font-weight: 600; margin-bottom: 12px; }
.chat-offer-actions { display: flex; gap: 8px; }
.chat-offer-btn { flex: 1; padding: 8px 12px; border-radius: 20px; border: none; font-size: 14px; font-weight: 600; cursor: pointer; }
.chat-offer-btn.primary { background: var(--color-primary); color: white; }
.chat-offer-btn.secondary { background: var(--color-pill-inactive); color: var(--color-text-primary); }


/* Chat Input Area */
.chat-input-container {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    border-top: 1px solid var(--color-border);
    gap: 12px;
    background-color: var(--color-card-bg);
    flex-shrink: 0;
}

/* Modern Chat Message Styling */
.chat-message-modern {
    display: flex;
    flex-direction: column;
    margin-bottom: 16px;
    max-width: 80%;
}

.chat-message-modern.received {
    align-self: flex-start;
}

.chat-message-modern:not(.received) {
    align-self: flex-end;
}

.message-bubble-modern {
    background: var(--color-pill-inactive);
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 15px;
    line-height: 1.4;
    word-wrap: break-word;
    margin-bottom: 4px;
}

.chat-message-modern:not(.received) .message-bubble-modern {
    background: var(--color-primary);
    color: white;
}

.message-time-modern {
    font-size: 12px;
    color: var(--color-text-secondary);
    margin-top: 4px;
    text-align: center;
}

/* Chat Page Styling */
.chat-page {
    display: none;
    flex-direction: column;
    height: 100vh;
    background: var(--color-background);
}

.chat-header-modern {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    background: var(--color-card-bg);
    border-bottom: 1px solid var(--color-border);
    gap: 12px;
}

.chat-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
}

.chat-header-info {
    flex: 1;
}

.chat-name {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    color: var(--color-text-primary);
}

.chat-status {
    font-size: 14px;
    color: var(--color-text-secondary);
    margin: 0;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    background: var(--color-background);
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.chat-input-bar-modern {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    background: var(--color-card-bg);
    border-top: 1px solid var(--color-border);
    gap: 12px;
}

.chat-input-icon {
    background: none;
    border: none;
    font-size: 20px;
    color: var(--color-text-secondary);
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: background-color 0.2s;
}

.chat-input-icon:hover {
    background-color: var(--color-pill-inactive);
}

/* --- Fullscreen Chat Modal Styles --- */
.modal-overlay.is-fullscreen {
    background: transparent; /* Hides the dark overlay for a seamless look */
    backdrop-filter: none;
}

.chat-modal.is-fullscreen {
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    border-radius: 0;
    box-shadow: none;
}
.chat-input {
    flex: 1;
    border: 1px solid var(--color-border);
    background-color: white;
    border-radius: 20px;
    padding: 10px 16px;
    font-size: 15px;
    outline: none;
}

.chat-input:focus {
    border-color: var(--color-primary);
}

/* Hides the extra icons in the input for a cleaner look */
.chat-input-icon {
    display: none;
}
/* Add these new styles for the My Prospects card */

/* This container will hold the key stats (PPG, APG, etc.) */
.prospect-stats-preview {
    display: flex;
    gap: 16px; /* Space between each stat */
    margin-top: 8px;
}

.prospect-stat-item {
    text-align: left;
}

/* Style for the stat label (e.g., "PPG") */
.prospect-stat-key {
    font-size: 11px;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    display: block;
}

/* Style for the stat value (e.g., "25.7") */
.prospect-stat-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--color-text-primary);
}

/* This container holds the price info on the right */
.prospect-price-info {
    text-align: right;
    margin-left: auto; /* Pushes it to the far right */
    flex-shrink: 0;   /* Prevents it from shrinking */
}

/* Style for the main price */
.prospect-price-info .prospect-price {
    font-size: 16px;
    font-weight: 600;
}

/* Style for the daily price change */
.prospect-price-info .prospect-change {
    font-size: 13px;
}

/* The positive/negative color styles should already exist, but are here for reference */
.prospect-change.positive {
    color: var(--color-success);
}
.prospect-change.negative {
    color: var(--color-danger);
}

.prospect-shares {
    font-size: 13px;
    color: var(--color-text-secondary);
    margin-bottom: 4px;
}

.prospect-total-value {
    font-size: 18px;
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 2px;
}

.transaction-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid var(--color-border);
}
.transaction-item:last-child {
    border-bottom: none;
}
.remodel-container {
    padding: 16px 0;
}
.remodel-header {
    text-align: left;
    padding-bottom: 16px;
    margin-bottom: 16px;
    border-bottom: 1px solid var(--color-border);
}
.remodel-price {
    font-size: 32px;
    font-weight: 700;
    line-height: 1;
    color: var(--color-text-primary);
}
.remodel-change {
    font-size: 16px;
    font-weight: 500;
    margin-top: 4px;
}
.remodel-change .icon {
    display: inline-block;
    vertical-align: middle;
    width: 16px;
    height: 16px;
    margin-right: 4px;
}
.remodel-range-selector {
    display: flex;
    gap: 8px;
    margin: 16px 0;
}
.remodel-range-btn {
    flex: 1;
    padding: 6px;
    border: none;
    background: none;
    color: #8E8E93;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    border-radius: 6px;
    text-align: center;
}
.remodel-range-btn.active {
    background-color: var(--color-primary);
    color: #FFFFFF;
}
.chart-layout-container {
    display: flex;
    gap: 8px;
    height: 150px;
}
.chart-wrap {
    position: relative;
    flex: 1;
}
.transaction-details {
    font-size: 15px;
}
.transaction-amount {
    font-weight: 600;
}
.buy {
    color: var(--color-success);
}
.sell {
    color: var(--color-danger);
}/* Dark Mode Theme */
body.dark-mode {
    --color-primary: #0A84FF;
    --color-text-primary: #FFFFFF;
    --color-text-secondary: #8E8E93;
    --color-text-light: #48484A;
    --color-background: #000000;
    --color-card-bg: #1C1C1E;
    --color-border: #3A3A3C;
    --color-success: #32D74B;
    --color-danger: #FF453A;
    --color-pill-active: #0A84FF;
    --color-pill-inactive: #2C2C2E;
    --chart-blue: #0A84FF;
    --color-activity-dot: #FF375F;
}

/* Specific Dark Mode Overrides */
body.dark-mode .tab-item.active .tab-icon {
    filter: invert(48%) sepia(61%) saturate(4062%) hue-rotate(193deg) brightness(102%) contrast(102%);
}
body.dark-mode .remodel-market-info {
    border-bottom-color: var(--color-border);
}

/* Toggle Switch Styles */
.switch {
    position: relative;
    display: inline-block;
    width: 51px;
    height: 31px;
}
.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}
.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
}
.slider:before {
    position: absolute;
    content: "";
    height: 27px;
    width: 27px;
    left: 2px;
    bottom: 2px;
    background-color: white;
    transition: .4s;
}
input:checked + .slider {
    background-color: var(--color-success);
}
input:focus + .slider {
    box-shadow: 0 0 1px var(--color-success);
}
input:checked + .slider:before {
    transform: translateX(20px);
}
.slider.round {
    border-radius: 34px;
}
.slider.round:before {
    border-radius: 50%;
}
#authModalOverlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    z-index: 2000;
}
#authModalOverlay.active {
    display: flex !important;
}
#authModalOverlay.active .modal {
    display: block !important;
}

.chat-page {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 2000;
  background: #fff;
  display: none;
  flex-direction: column;
  width: 100vw;
  height: 100vh;
  max-width: 100vw;
  max-height: 100vh;
}
.chat-header-modern {
  display: flex;
  align-items: center;
  padding: 16px 20px;
  background: var(--color-card-bg);
  border-bottom: 1px solid var(--color-border);
  gap: 12px;
}
.chat-back-btn {
  background: none;
  border: none;
  font-size: 22px;
  margin-right: 8px;
  cursor: pointer;
  color: #222;
}
.chat-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  margin-right: 12px;
  object-fit: cover;
  border: 2px solid #eee;
}
.chat-header-info {
  flex: 1;
}
.chat-name {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
  color: var(--color-text-primary);
}
.chat-status {
  font-size: 13px;
  color: #888;
}
.chat-messages {
  flex: 1;
  overflow-y: auto;
  background: #f7f7f9;
  padding: 18px 10px 12px 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.chat-message-modern {
  display: flex;
  flex-direction: column;
  max-width: 80%;
}
.chat-message-modern.sent {
  align-self: flex-end;
  align-items: flex-end;
}
.chat-message-modern.received {
  align-self: flex-start;
  align-items: flex-start;
}
.message-bubble-modern {
  background: #e6f0fa;
  color: #222;
  padding: 12px 16px;
  border-radius: 18px;
  margin-bottom: 4px;
  word-break: break-word;
  max-width: 100%;
  font-size: 15px;
}
.chat-message-modern.sent .message-bubble-modern {
  background: #007aff;
  color: #fff;
}
.chat-message-modern.received .message-bubble-modern {
  background: #f1f1f1;
  color: #222;
}
.message-time-modern {
  font-size: 11px;
  color: #6c757d;
  margin-top: 2px;
}
.chat-input-bar-modern {
  display: flex;
  align-items: center;
  padding: 12px 14px;
  background: #fff;
  border-top: 1px solid #eee;
  gap: 8px;
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 10;
}
.chat-input {
  flex: 1;
  border: none;
  border-radius: 20px;
  background: #f1f1f1;
  padding: 10px 16px;
  font-size: 15px;
  outline: none;
  margin-right: 4px;
}
.chat-input-icon {
  background: none;
  border: none;
  font-size: 22px;
  color: #888;
  cursor: pointer;
  margin-left: 2px;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s;
}
.chat-input-icon:hover {
  background: #f1f1f1;
}
@media (max-width: 600px) {
  .chat-page {
    max-width: 100vw;
    max-height: 100vh;
    border-radius: 0;
  }
}

/* Ensure messages page is hidden by default */
.page-content.messages-page {
    display: none;
    background: var(--color-card-bg);
    border-radius: 12px;
}

.page-content.messages-page.active {
    display: block;
}

/* ===========================================
   RESPONSIVE DESKTOP STYLES
   =========================================== */

/* Hide desktop sidebar on mobile by default */
.desktop-sidebar {
    display: none;
}

.main-content-area {
    margin-left: 0;
    width: 100%;
}

/* Tablet and Desktop Styles */
@media (min-width: 768px) {
    /* Show desktop sidebar */
    .desktop-sidebar {
        display: flex;
    }
    /* Body adjustments for larger screens */
    body {
        background-color: var(--color-background);
        padding: 0;
        display: flex;
        height: 100vh;
        overflow: hidden;
    }

    /* Main app container - full screen with sidebar */
    .app-container {
        max-width: none;
        width: 100%;
        height: 100vh;
        border-radius: 0;
        box-shadow: none;
        overflow: hidden;
        margin: 0;
        display: flex;
        background-color: var(--color-card-bg);
    }

    /* Sidebar Navigation */
    .desktop-sidebar {
        width: 280px;
        height: 100vh;
        background-color: var(--color-card-bg);
        border-right: 1px solid var(--color-border);
        display: flex;
        flex-direction: column;
        padding: 24px 0;
        position: fixed;
        left: 0;
        top: 0;
        z-index: 100;
    }

    .sidebar-header {
        padding: 0 24px 32px 24px;
        border-bottom: 1px solid var(--color-border);
        margin-bottom: 24px;
    }

    .sidebar-title {
        font-size: 24px;
        font-weight: 700;
        color: var(--color-text-primary);
        margin: 0;
    }

    .sidebar-nav {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .sidebar-nav-item {
        display: flex;
        align-items: center;
        padding: 12px 24px;
        text-decoration: none;
        color: var(--color-text-secondary);
        font-weight: 500;
        font-size: 16px;
        transition: all 0.2s ease;
        cursor: pointer;
        border: none;
        background: none;
        width: 100%;
        text-align: left;
    }

    .sidebar-nav-item:hover {
        background-color: var(--color-background);
        color: var(--color-text-primary);
    }

    .sidebar-nav-item.active {
        background-color: var(--color-primary);
        color: white;
        font-weight: 600;
    }

    .sidebar-nav-item.active .sidebar-nav-icon {
        color: white;
    }

    .sidebar-nav-icon {
        width: 24px;
        height: 24px;
        margin-right: 16px;
        color: currentColor;
        flex-shrink: 0;
    }

    .sidebar-nav-text {
        font-size: 16px;
        font-weight: inherit;
    }

    .sidebar-divider {
        height: 1px;
        background-color: var(--color-border);
        margin: 16px 0;
    }

    /* Main content area adjustment */
    .main-content-area {
        margin-left: 280px;
        width: calc(100% - 280px);
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
    }

    /* Hide mobile header on desktop */
    .header {
        display: none;
    }

    /* Hide mobile tab bar on desktop */
    .tab-bar {
        display: none;
    }

    /* Content area adjustments */
    .content {
        padding: 32px;
        padding-bottom: 32px;
        flex: 1;
        overflow-y: auto;
    }

    /* Desktop header for content areas */
    .desktop-content-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 32px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--color-border);
    }

    .desktop-content-title {
        font-size: 28px;
        font-weight: 700;
        color: var(--color-text-primary);
        margin: 0;
    }

    /* Grid improvements for larger screens */
    .athletes-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 24px;
    }

    .stats-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 24px;
        margin-bottom: 32px;
    }

    /* Pills container - better spacing */
    .pills-container {
        gap: 12px;
        padding: 0;
        margin-bottom: 24px;
        flex-wrap: wrap;
    }

    /* Sports grid improvements */
    .sports-grid {
        gap: 16px;
        padding: 0;
        margin-bottom: 24px;
    }

    /* Search bar improvements */
    .search-bar {
        margin: 0 0 24px 0;
        max-width: 500px;
    }

    /* Modal improvements for desktop */
    .modal {
        max-width: 500px;
        max-height: 80vh;
        border-radius: 16px;
        box-shadow: 0 12px 48px rgba(0, 0, 0, 0.2);
    }

    .modal-header {
        padding: 20px 24px;
        border-bottom: 1px solid var(--color-border);
    }

    .modal-content {
        padding: 24px;
    }

    /* Chat modal improvements */
    .chat-modal {
        max-width: 600px;
        max-height: 80vh;
        border-radius: 16px;
        box-shadow: 0 12px 48px rgba(0, 0, 0, 0.2);
    }

    .chat-page {
        border-radius: 16px;
        /* Position chat page to the right of sidebar on desktop */
        left: 280px;
        width: calc(100vw - 280px);
        right: auto;
    }
}

/* Large Desktop Styles */
@media (min-width: 1024px) {
    /* Larger container for desktop */
    .app-container {
        max-width: 1024px;
    }

    /* Four-column grid for athletes on large screens */
    .athletes-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
    }

    /* Better spacing for large screens */
    .content {
        padding: 24px 32px;
        padding-bottom: 120px;
    }

    .header {
        padding: 20px 32px;
    }

    .tab-bar {
        padding: 16px 32px;
    }

    .pills-container {
        padding: 0 32px;
    }

    .sports-grid {
        padding: 0 32px;
    }

    .search-bar {
        margin: 20px 32px;
        max-width: 500px;
    }

    /* Larger modals for desktop */
    .modal {
        max-width: 600px;
    }

    .chat-modal {
        max-width: 800px;
    }

    /* Sidebar improvements */
    .desktop-sidebar {
        box-shadow: 2px 0 12px rgba(0,0,0,0.04);
    }
    .sidebar-nav-item {
        font-size: 18px;
        padding: 16px 28px;
        margin-bottom: 23px; /* Increased from 14px to 23px for more spacing */
    }
    .sidebar-title {
        font-size: 32px;
    }
    /* Main content improvements */
    .main-content-area {
        padding: 40px 56px;
        background: var(--color-background);
        margin-left: 280px;
        width: calc(100% - 280px);
        min-height: 100vh;
        box-sizing: border-box;
    }
    .app-container {
        display: flex;
        flex-direction: row;
        width: 100vw;
        height: 100vh;
        max-width: none;
        margin: 0;
        background: var(--color-background);
    }
    /* Remove any extra div or margin between sidebar and main content */
    .desktop-sidebar + div:not(.main-content-area) {
        display: none !important;
    }
    .desktop-content-header {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 32px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--color-border);
    }
    /* Card improvements */
    .desktop-card, .card {
        box-shadow: 0 4px 24px rgba(0,0,0,0.08);
        border-radius: 18px;
        padding: 32px;
    }
    .desktop-card:hover, .card:hover {
        box-shadow: 0 8px 32px rgba(0,0,0,0.12);
        transform: translateY(-2px);
    }
    /* Grid improvements */
    .desktop-grid, .athletes-grid {
        gap: 32px;
    }
    /* Table improvements */
    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 12px;
        font-size: 18px;
    }
    th, td {
        padding: 16px 20px;
    }
    th {
        background: var(--color-background);
        font-weight: 700;
    }
    tr {
        background: var(--color-card-bg);
        border-radius: 12px;
    }
    tr:hover {
        background: var(--color-background);
    }
    /* Sticky filter panel for Explore/Offers */
    .sticky-filter-panel {
        position: sticky;
        top: 24px;
        z-index: 10;
        background: var(--color-card-bg);
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        padding: 20px 24px;
        margin-bottom: 32px;
    }
    /* Enhanced hover/focus states */
    .sidebar-nav-item:focus, .sidebar-nav-item:hover {
        outline: 2px solid var(--color-primary);
        outline-offset: 2px;
    }
    .pill:focus, .pill:hover {
        background: var(--color-primary);
        color: #fff;
    }
    .btn-primary:focus, .btn-primary:hover {
        background: var(--color-success);
        color: #fff;
    }
    /* Accessibility: larger font and contrast */
    body, .main-content-area, .sidebar-nav-item, .card, .desktop-card {
        font-size: 18px;
    }
    /* Portfolio chart fills container */
    .chart-container {
        width: 100%;
        height: 320px;
        min-width: 0;
        min-height: 0;
    }
    /* Tooltip for chart data points */
    .chart-tooltip {
        position: absolute;
        pointer-events: none;
        background: rgba(0,0,0,0.85);
        color: #fff;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 15px;
        z-index: 100;
        display: none;
        white-space: nowrap;
    }
    /* Make portfolio chart fill the card */
    .card#portfolioCard .chart-container {
        display: flex;
        flex-direction: row;
        align-items: stretch;
        width: 100%;
        height: 320px;
        min-width: 0;
        min-height: 0;
    }
    .card#portfolioCard .chart-wrapper {
        flex: 1;
        display: flex;
        align-items: stretch;
        width: 100%;
    }
    .card#portfolioCard canvas.chart {
        width: 100% !important;
        height: 100% !important;
        max-width: 100%;
        max-height: 100%;
        display: block;
    }
}

/* Extra Large Desktop Styles */
@media (min-width: 1200px) {
    .app-container {
        max-width: 1200px;
    }

    /* Five-column grid for very large screens */
    .athletes-grid {
        grid-template-columns: repeat(5, 1fr);
        gap: 24px;
    }

    /* Maximum spacing for very large screens */
    .content {
        padding: 32px 40px;
        padding-bottom: 140px;
    }

    .header {
        padding: 24px 40px;
    }

    .tab-bar {
        padding: 20px 40px;
    }

    .pills-container {
        padding: 0 40px;
    }

    .sports-grid {
        padding: 0 40px;
    }

    .search-bar {
        margin: 24px 40px;
        max-width: 600px;
    }
}

/* Hover effects for desktop (only apply on non-touch devices) */
@media (hover: hover) {
    .athlete-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .tab-item:hover {
        background-color: var(--color-background);
    }

    .pill:hover {
        background-color: var(--color-text-secondary);
        color: white;
    }

    .btn-primary:hover {
        background-color: var(--color-success);
        transform: translateY(-1px);
    }

    .btn-secondary:hover {
        background-color: var(--color-text-secondary);
        color: white;
    }

    .header-icon:hover {
        background-color: var(--color-background);
        border-radius: 8px;
    }

    .sport-item:hover {
        background-color: var(--color-background);
    }
}

body.dark-mode .tab-item[data-page="activities"].active .tab-icon {
    filter: none !important;
    opacity: 1 !important;
}

        /* Add invisible gap between header and page content on mobile */
        @media (max-width: 767px) {
            /* Complete mobile border fix - eliminate background color differences */
            html, body {
                margin: 0 !important;
                padding: 0 !important;
                width: 100vw !important;
                overflow-x: hidden !important;
                background-color: var(--color-card-bg) !important; /* Use white background instead of grey */
            }
            
            .app-container {
                width: 100vw !important;
                margin: 0 !important;
                padding: 0 !important;
                background-color: var(--color-card-bg) !important; /* Match body background */
            }
            
            .main-content-area {
                width: 100vw !important;
                margin: 0 !important;
                padding: 0 !important;
                background-color: var(--color-card-bg) !important; /* Match body background */
            }
            
            .page-content {
                margin: 0 !important;
                padding: 20px !important;
                border-radius: 0 !important;
                background-color: var(--color-card-bg) !important; /* Ensure consistent background */
            }
            
            /* Remove any card background differences */
            .card {
                background-color: var(--color-card-bg) !important;
                border-radius: 0 !important;
                margin: 0 !important;
                border: none !important;
                box-shadow: none !important;
            }
        }

        @media (min-width: 768px) {
            body.dark-mode .page-content.messages-page {
                background: var(--color-card-bg);
            }
            body.dark-mode .messages-list {
                background: var(--color-card-bg);
            }
            body.dark-mode .message-item {
                background: var(--color-card-bg);
                border-bottom: 1px solid var(--color-border);
            }
            body.dark-mode .message-item:hover {
                background: #232326;
            }
            body.dark-mode .message-name {
                color: var(--color-text-primary);
            }
            body.dark-mode .message-preview,
            body.dark-mode .message-time {
                color: var(--color-text-secondary);
            }
            body.dark-mode .search-bar {
                background: #232326;
                border: 1px solid var(--color-border);
                border-radius: 10px;
            }
            body.dark-mode .search-input {
                color: var(--color-text-primary);
            }
            body.dark-mode .search-input::placeholder {
                color: var(--color-text-secondary);
            }
            body.dark-mode .create-post-btn {
                background: var(--color-primary);
                color: white;
            }
            body.dark-mode .create-post-btn:hover {
                background: var(--color-secondary);
            }
            
            body.dark-mode #createPostModal textarea {
                background: var(--color-background);
                color: var(--color-text-primary);
                border-color: var(--color-border);
            }
            
            body.dark-mode #createPostModal .modal-actions button {
                background: var(--color-background);
                color: var(--color-text-primary);
                border-color: var(--color-border);
            }
            
            body.dark-mode #createPostModal .modal-actions button[type="submit"] {
                background: var(--color-primary);
                color: white;
            }
            
            body.dark-mode .reply-input {
                background: var(--color-background);
                color: var(--color-text-primary);
                border-color: var(--color-border);
            }
            
            body.dark-mode .reply-input:focus {
                border-color: var(--color-primary);
                outline: none;
            }
            
            body.dark-mode .reply-input::placeholder {
                color: var(--color-text-secondary);
            }
            
            body.dark-mode .reply-input-container {
                background: transparent;
            }
        }

        body.dark-mode .chat-page {
            background: var(--color-background) !important;
        }
        body.dark-mode .chat-header-modern {
            background: var(--color-card-bg) !important;
            border-bottom: 1px solid var(--color-border) !important;
            box-shadow: none !important;
        }
        body.dark-mode .chat-back-btn svg {
            stroke: var(--color-text-primary) !important;
        }
        body.dark-mode .chat-name {
            color: var(--color-text-primary) !important;
        }
        body.dark-mode .chat-status {
            color: var(--color-text-secondary) !important;
        }
        body.dark-mode .chat-messages {
            background: var(--color-card-bg) !important;
        }
        body.dark-mode .message-bubble-modern {
            background: var(--color-background) !important;
            color: var(--color-text-primary) !important;
        }
        body.dark-mode .chat-message-modern.sent .message-bubble-modern {
            background: var(--color-primary) !important;
            color: #fff !important;
        }
        body.dark-mode .chat-message-modern.received .message-bubble-modern {
            background: var(--color-background) !important;
            color: var(--color-text-primary) !important;
        }
        body.dark-mode .chat-input-bar-modern {
            background: var(--color-card-bg) !important;
            border-top: 1px solid var(--color-border) !important;
        }
        body.dark-mode .chat-input {
            background: var(--color-background) !important;
            color: var(--color-text-primary) !important;
            border: 1px solid var(--color-border) !important;
        }
        body.dark-mode .chat-input::placeholder {
            color: var(--color-text-secondary) !important;
        }
        body.dark-mode .message-name {
            color: var(--color-text-primary) !important;
        }
        body.dark-mode .message-preview,
        body.dark-mode .message-time {
            color: var(--color-text-secondary) !important;
        }
        body.dark-mode .message-item {
            border-bottom: 1px solid var(--color-border) !important;
            background: var(--color-card-bg) !important;
        }
        body.dark-mode .message-item:last-child {
            border-bottom: none !important;
        }
        body.dark-mode .chat-offer-card {
            background: var(--color-card-bg) !important;
            color: var(--color-text-primary) !important;
            border: 1px solid var(--color-border) !important;
        }
        body.dark-mode .chat-offer-title {
            color: var(--color-text-secondary) !important;
        }

        /* ======================================= */
        /* ====== Social Feed Styling ========== */
        /* ======================================= */

        /* Post Items */
        .post-item {
            background: var(--color-card-bg);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid var(--color-border);
            transition: all 0.2s ease;
        }

        .post-item:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Post Header */
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 12px;
        }

        .post-author-info {
            flex: 1;
            min-width: 0;
        }

        .post-author-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 2px;
            cursor: pointer;
        }

        .post-author-name:hover {
            color: var(--color-primary);
        }

        .post-author-handle {
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        .post-time {
            font-size: 14px;
            color: var(--color-text-secondary);
            white-space: nowrap;
        }

        /* Post Content */
        .post-content {
            margin-bottom: 12px;
        }

        .post-text {
            font-size: 15px;
            line-height: 1.5;
            color: var(--color-text-primary);
            margin-bottom: 12px;
            white-space: pre-wrap;
        }

        .post-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .post-image:hover {
            transform: scale(1.02);
        }

        .post-athlete-tag {
            display: inline-flex;
            align-items: center;
            background: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: 20px;
            padding: 6px 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 8px;
        }

        .post-athlete-tag:hover {
            background: var(--color-primary);
            color: white;
        }

        .post-athlete-tag img {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .post-athlete-tag span {
            font-size: 13px;
            font-weight: 600;
        }

        /* Post Actions */
        .post-actions {
            display: flex;
            align-items: center;
            gap: 16px;
            padding-top: 8px;
            border-top: 1px solid var(--color-border);
        }

        .post-action-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: none;
            border: none;
            color: var(--color-text-secondary);
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .post-action-btn:hover {
            background: var(--color-background);
            color: var(--color-text-primary);
        }

        .post-action-btn.liked {
            color: #FF3B30;
        }

        .post-action-btn.liked:hover {
            background: rgba(255, 59, 48, 0.1);
        }

        .post-action-btn svg {
            width: 18px;
            height: 18px;
        }

        .post-action-btn.liked svg {
            fill: currentColor;
        }

        /* Comments Section */
        .post-comments {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--color-border);
        }

        .comment-input-container {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 16px;
        }

        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        .comment-input-wrapper {
            flex: 1;
            display: flex;
            gap: 8px;
        }

        .comment-input {
            flex: 1;
            border: 1px solid var(--color-border);
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            background: var(--color-background);
            outline: none;
        }

        .comment-input:focus {
            border-color: var(--color-primary);
        }

        .comment-submit-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .comment-submit-btn:hover {
            background: #0056d3;
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .comment-item {
            display: flex;
            gap: 12px;
        }

        .comment-content {
            flex: 1;
            min-width: 0;
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .comment-author {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-primary);
            cursor: pointer;
        }

        .comment-author:hover {
            color: var(--color-primary);
        }

        .comment-time {
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .comment-text {
            font-size: 14px;
            line-height: 1.4;
            color: var(--color-text-primary);
            margin-bottom: 6px;
        }

        .comment-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .comment-like-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            color: var(--color-text-secondary);
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .comment-like-btn:hover {
            background: var(--color-background);
            color: var(--color-text-primary);
        }

        .comment-like-btn.liked {
            color: #FF3B30;
        }

        .comment-like-btn.liked svg {
            fill: currentColor;
        }

        .no-comments {
            text-align: center;
            color: var(--color-text-secondary);
            font-size: 14px;
            padding: 20px;
        }

        /* Search Results */
        .search-results-section {
            margin-bottom: 24px;
        }

        .search-section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--color-primary);
        }

        .search-users-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .search-user-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .search-user-item:hover {
            background: var(--color-background);
            border-color: var(--color-primary);
        }

        .search-user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .search-user-info {
            flex: 1;
            min-width: 0;
        }

        .search-user-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 2px;
        }

        .search-user-handle {
            font-size: 14px;
            color: var(--color-text-secondary);
        }
        
        /* Post Image and Video Styles */
        .post-image, .post-video {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-top: 12px;
            cursor: pointer;
            object-fit: cover;
            max-height: 400px;
            width: 100%;
        }
        
        .post-video {
            cursor: default;
        }
        
        /* Athlete mention styles */
        .athlete-mention {
            color: var(--color-primary);
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
        }
        
        .athlete-mention:hover {
            text-decoration: underline;
        }

        /* Dark Mode Support for Social Feed */
        body.dark-mode .post-item {
            background: var(--color-card-bg) !important;
            border-color: var(--color-border) !important;
        }

        body.dark-mode .post-athlete-tag {
            background: var(--color-background) !important;
            border-color: var(--color-border) !important;
        }

        body.dark-mode .post-athlete-tag:hover {
            background: var(--color-primary) !important;
            color: white !important;
        }

        /* Athlete Tagging Styles */
        .athlete-dropdown {
            background: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
        }

        .athlete-dropdown-item {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            cursor: pointer;
            border-bottom: 1px solid var(--color-border);
            transition: background-color 0.2s;
        }

        .athlete-dropdown-item:last-child {
            border-bottom: none;
        }

        .athlete-dropdown-item:hover {
            background: var(--color-background);
        }

        .athlete-dropdown-item img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }

        .athlete-dropdown-item .info {
            flex: 1;
        }

        .athlete-dropdown-item .name {
            font-weight: 600;
            color: var(--color-text-primary);
            font-size: 14px;
        }

        .athlete-dropdown-item .details {
            color: var(--color-text-secondary);
            font-size: 12px;
        }

        .tagged-athlete {
            display: inline-flex;
            align-items: center;
            background: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: 16px;
            padding: 4px 8px 4px 4px;
            font-size: 12px;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .tagged-athlete img {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 6px;
            object-fit: cover;
        }

        .tagged-athlete .remove-tag {
            margin-left: 6px;
            cursor: pointer;
            color: var(--color-text-secondary);
            font-weight: bold;
            padding: 0 2px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .tagged-athlete .remove-tag:hover {
            background: var(--color-danger);
            color: white;
        }

        body.dark-mode .athlete-dropdown {
            background: var(--color-card-bg);
            border-color: var(--color-border);
            box-shadow: 0 4px 12px rgba(255,255,255,0.1);
        }

        body.dark-mode .athlete-dropdown-item:hover {
            background: var(--color-background);
        }

        body.dark-mode .tagged-athlete {
            background: var(--color-background);
            border-color: var(--color-border);
        }

        body.dark-mode .comment-input {
            background: var(--color-background) !important;
            border-color: var(--color-border) !important;
            color: var(--color-text-primary) !important;
        }
        
        /* Dark mode for form inputs (offer modal, etc.) */
        body.dark-mode .form-input {
            background: var(--color-background) !important;
            border-color: var(--color-border) !important;
            color: var(--color-text-primary) !important;
        }
        body.dark-mode .form-input:focus {
            border-color: var(--color-primary) !important;
        }
        body.dark-mode .form-input::placeholder {
            color: var(--color-text-secondary) !important;
        }
        body.dark-mode .form-input option {
            background: var(--color-background) !important;
            color: var(--color-text-primary) !important;
        }
        
        /* Dark mode for modal inputs with inline styles */
        body.dark-mode #offerModal input {
            background: var(--color-background) !important;
            color: var(--color-text-primary) !important;
            border-color: var(--color-border) !important;
        }
        body.dark-mode #offerModal input:focus {
            border-color: var(--color-primary) !important;
        }

        /* Athlete Search Results */
        .athlete-search-item {
            display: flex;
            align-items: center;
            padding: 12px;
            cursor: pointer;
            border-bottom: 1px solid var(--color-border);
            transition: background-color 0.2s;
        }
        .athlete-search-item:last-child {
            border-bottom: none;
        }
        .athlete-search-item:hover {
            background: var(--color-background);
        }
        .athlete-search-item img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
            object-fit: cover;
        }
        .athlete-search-item .info {
            flex: 1;
        }
        .athlete-search-item .name {
            font-weight: 600;
            color: var(--color-text-primary);
            font-size: 16px;
            margin-bottom: 2px;
        }
        .athlete-search-item .details {
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        /* Athlete Links in Posts */
        .athlete-link {
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        .athlete-link:hover {
            opacity: 0.8;
        }

        /* Dark mode fixes for buttons */
        body.dark-mode .insert-athlete-btn {
            background: var(--color-primary) !important;
            color: white !important;
        }
        body.dark-mode #postVisibility {
            background: var(--color-card-bg) !important;
            border-color: var(--color-border) !important;
            color: var(--color-text-primary) !important;
        }
        body.dark-mode .modal-actions button {
            background: var(--color-background) !important;
            border-color: var(--color-border) !important;
            color: var(--color-text-primary) !important;
        }
        body.dark-mode .modal-actions button[type="submit"] {
            background: var(--color-primary) !important;
            color: white !important;
        }
        body.dark-mode .media-upload-container button {
            background: var(--color-background) !important;
            border-color: var(--color-border) !important;
            color: var(--color-text-secondary) !important;
        }
        body.dark-mode #athleteSearchInput {
            background: var(--color-card-bg) !important;
            border-color: var(--color-border) !important;
            color: var(--color-text-primary) !important;
        }

        /* Athlete Search Modal specific styling */
        #athleteSearchModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10001 !important;
        }
        #athleteSearchModal.active {
            display: flex !important;
        }
        #athleteSearchModal .modal {
            background: var(--color-card-bg);
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
            position: relative;
            z-index: 10002;
            max-width: 500px;
            max-height: 600px;
            width: 90%;
            max-width: 500px;
        }
        body.dark-mode #athleteSearchModal .modal {
            background: var(--color-card-bg) !important;
            box-shadow: 0 20px 40px rgba(255,255,255,0.1);
        }

        body.dark-mode .search-user-item {
            background: var(--color-card-bg) !important;
            border-color: var(--color-border) !important;
        }

        body.dark-mode .search-user-item:hover {
            background: var(--color-background) !important;
            border-color: var(--color-primary) !important;
        }

        /* Responsive Design for Social Feed */
        @media (max-width: 768px) {
            .post-item {
                padding: 12px;
                margin-bottom: 12px;
            }

            .post-actions {
                gap: 12px;
            }

            .post-action-btn {
                padding: 6px 8px;
                font-size: 13px;
            }

            .comment-input-container {
                gap: 8px;
            }

            .comment-avatar {
                width: 28px;
                height: 28px;
            }

            .search-user-item {
                padding: 8px;
            }

            .search-user-avatar {
                width: 36px;
                height: 36px;
            }
        }

        /* Offers Page Styles */
        .offers-nav-container {
            padding: 0 20px 16px;
        }

        .offers-nav-pills {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .offers-nav-pills .pill {
            flex: 1;
            text-align: center;
            min-width: 0;
            white-space: nowrap;
            font-size: 14px;
            padding: 10px 16px;
        }
        
        /* Fix for very small phone displays */
        @media (max-width: 375px) {
            .offers-nav-pills .pill {
                font-size: 12px !important;
                padding: 8px 10px !important;
                white-space: normal !important; /* Allow text wrapping */
                line-height: 1.2 !important;
                min-height: 36px !important; /* Ensure consistent height */
            }
        }
        
        @media (max-width: 320px) {
            .offers-nav-pills .pill {
                font-size: 11px !important;
                padding: 6px 8px !important;
                white-space: normal !important; /* Allow text wrapping */
                line-height: 1.1 !important;
                min-height: 32px !important; /* Ensure consistent height */
            }
        }

        .offers-section {
            display: none;
        }

        .offers-section.active {
            display: block;
        }

        .athletes-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            padding: 0 20px 16px;
        }

        .athlete-card {
            background: var(--color-card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .athlete-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        }

        .athlete-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        .athlete-info {
            padding: 12px;
        }

        .athlete-position {
            font-size: 11px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .athlete-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--color-text-primary);
        }

        .athlete-price {
            font-size: 13px;
            color: var(--color-primary);
            font-weight: 500;
        }


        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--color-text-secondary);
            font-size: 16px;
        }

        .error-message {
            text-align: center;
            padding: 40px 20px;
            color: var(--color-danger);
            font-size: 16px;
        }

        /* Additional Offer Styles */
        .offer-description {
            font-size: 14px;
            color: var(--color-text-secondary);
            margin: 4px 0;
        }

        .offer-user {
            font-size: 12px;
            color: var(--color-text-light);
            font-style: italic;
        }

        .offer-price-info {
            text-align: right;
            margin-left: auto;
            min-width: 80px;
        }

        .offer-timestamp {
            font-size: 11px;
            color: var(--color-text-light);
            margin-top: 4px;
        }

        /* Offer Details Modal Styles */
        .offer-details {
            padding: 0;
        }

        .offer-athlete-section {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            border-bottom: 1px solid var(--color-border);
            margin-bottom: 20px;
        }

        .offer-detail-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
        }

        .offer-athlete-info {
            flex: 1;
        }

        .offer-athlete-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--color-text-primary);
        }

        .offer-athlete-position {
            font-size: 14px;
            color: var(--color-text-secondary);
            margin-bottom: 12px;
        }

        .offer-info-section {
            padding: 0 20px 20px;
        }

        .offer-detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--color-background);
        }

        .offer-detail-row:last-child {
            border-bottom: none;
        }

        .offer-detail-label {
            font-weight: 500;
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .offer-detail-value {
            font-weight: 600;
            color: var(--color-text-primary);
            font-size: 14px;
            text-align: right;
        }

        .offer-detail-value.buying {
            color: var(--color-success);
        }

        .offer-detail-value.selling {
            color: var(--color-danger);
        }

        .offer-detail-value.total-value {
            font-size: 16px;
            color: var(--color-primary);
        }

        .offer-actions {
            display: flex;
            gap: 12px;
            padding: 20px;
            border-top: 1px solid var(--color-border);
        }

        .offer-actions button {
            flex: 1;
        }

        .btn-danger {
            background: var(--color-danger);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
        }

        .btn-danger:hover {
            opacity: 0.9;
        }

        .section-subtitle {
            font-size: 16px;
            font-weight: 500;
            color: var(--color-text-secondary);
            margin-bottom: 12px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-weight: 500;
            color: var(--color-text-primary);
            font-size: 14px;
            margin-bottom: 6px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            font-size: 16px;
            background: var(--color-card-bg);
            color: var(--color-text-primary);
            transition: border-color 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .form-input option {
            padding: 8px;
        }

        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        /* Desktop Responsive Styles */
        @media (min-width: 768px) {
            .offers-nav-container {
                padding: 0 24px 20px;
            }

            .offers-nav-pills {
                justify-content: center;
                max-width: 600px;
                margin: 0 auto 20px;
            }

            .offers-nav-pills .pill {
                flex: 0 1 auto;
                min-width: 140px;
                font-size: 15px;
                padding: 12px 24px;
            }

            .athletes-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
                padding: 0 24px 20px;
            }

            .athlete-card {
                border-radius: 12px;
            }

            .athlete-image {
                height: 160px;
            }

            .athlete-info {
                padding: 16px;
            }

            .athlete-position {
                font-size: 12px;
            }

            .athlete-name {
                font-size: 16px;
            }

            .athlete-price {
                font-size: 14px;
            }

            .offers-section .card {
                margin: 0 24px 20px;
                padding: 24px;
                border-radius: 12px;
            }

            .form-group {
                margin-bottom: 20px;
            }

            .form-group label {
                font-size: 15px;
                margin-bottom: 8px;
            }

            .form-input {
                padding: 14px;
                font-size: 16px;
                border-radius: 8px;
            }

            .btn-primary {
                padding: 14px 28px;
                font-size: 16px;
                border-radius: 8px;
            }
        }

        /* Tablet Responsive Styles */
        @media (min-width: 768px) and (max-width: 1024px) {
            .athletes-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Large Desktop Responsive Styles */
        @media (min-width: 1200px) {
            .athletes-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 24px;
                padding: 0 24px 24px;
            }

            .athlete-card {
                border-radius: 16px;
            }

            .athlete-image {
                height: 180px;
            }

            .athlete-info {
                padding: 20px;
            }

            .athlete-name {
                font-size: 18px;
            }

            .athlete-price {
                font-size: 15px;
            }
        }
    </style>
    
</head>


<body>
    <div class="app-container">
        <!-- Desktop Sidebar Navigation -->
        <div class="desktop-sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">FanScout</h1>
            </div>
            <nav class="sidebar-nav">
                <button class="sidebar-nav-item active" data-page="dashboard">
                    <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9,22 9,12 15,12 15,22"/>
                    </svg>
                    <span class="sidebar-nav-text">Dashboard</span>
                </button>
                <button class="sidebar-nav-item" data-page="explore">
                    <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <polygon points="16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88"/>
                    </svg>
                    <span class="sidebar-nav-text">Explore</span>
                </button>
                <button class="sidebar-nav-item" data-page="offers">
                    <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/>
                    </svg>
                    <span class="sidebar-nav-text">Offers</span>
                </button>
                <button class="sidebar-nav-item" data-page="activities">
                    <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                    <span class="sidebar-nav-text">Notifications</span>
                </button>
                <button class="sidebar-nav-item" data-page="leaderboard">
                    <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 3v18h18"/>
                        <path d="m19 9-5 5-4-4-3 3"/>
                    </svg>
                    <span class="sidebar-nav-text">Leaderboard</span>
                </button>
                <div class="sidebar-divider"></div>
                <button class="sidebar-nav-item" data-page="messages">
                    <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                    </svg>
                    <span class="sidebar-nav-text">Messages</span>
                </button>
                <button class="sidebar-nav-item" data-page="account">
                    <svg class="sidebar-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                    <span class="sidebar-nav-text">Profile</span>
                </button>
            </nav>
        </div>

        <!-- Main Content Area -->
        <div class="main-content-area">
            <div class="header">
            <button class="header-icon" id="headerMessagesBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 24px; height: 24px;">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
            </button>
            <div class="header-title" id="headerTitle">FanScout</div>
            <img src="images/image_48fb0979.png" alt="Profile" class="header-avatar" id="headerProfileBtn">
        </div>
        <div class="page-content messages-page">

    <div class="search-container">
        <div class="search-bar">
            <svg class="search-icon" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
            </svg>
            <input type="text" class="search-input" placeholder="Search messages..." id="messagesSearchInput">
        </div>
        <button class="new-message-btn" id="newMessageBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 3h18v18h-18z"></path>
                <polyline points="9,9 15,9"></polyline>
                <polyline points="9,12 15,12"></polyline>
                <polyline points="9,15 15,15"></polyline>
            </svg>
            New Message
        </button>
    </div>

    <div class="messages-list" id="messagesList"></div>
</div>
        <div class="page-content dashboard-page active">
            

            <div class="pills-container">
                <button class="pill active" data-filter="portfolio">Portfolio</button>
                <button class="pill" data-filter="my-prospects">My Prospects</button>
            </div>

            <div class="stats-grid" id="dashboardStatsGrid">
            <div class="stat-card">
                <div class="stat-label">Share Value</div>
                <div class="stat-value" id="total-share-value">$45,678.90</div>
                <div class="stat-change positive" id="share-value-change">+22% month over month</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Shares Owned</div>
                <div class="stat-value" id="total-shares-owned">2,405</div>
                <div class="stat-change positive" id="shares-owned-change">+34% month over month</div>
            </div>
        </div>

            <div class="card" id="portfolioCard">
                <h2 class="card-title">Portfolio</h2>
                <div class="range-btn-container" id="portfolio-range-selector">
                    <button class="range-btn" data-range="d5">5D</button>
                    <button class="range-btn active" data-range="m1">1M</button>
                    <button class="range-btn" data-range="m6">6M</button>
                    <button class="range-btn" data-range="y1">1Y</button>
                </div>
                <div class="chart-container">
                    <div class="y-axis" id="portfolio-y-axis"></div>
                    <div class="chart-wrapper">
                        <canvas id="portfolioChart" class="chart"></canvas>
                    </div>
                </div>
                <div class="chart-labels" id="portfolio-x-axis"></div>
            </div>

            <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 class="card-title" style="margin-bottom: 0;">Prospects</h2>
            <select id="prospectsSort" class="pill" style="border:none; padding-right: 30px;">
                <option value="default">Sort By...</option>
                <option value="name-asc">Name (A-Z)</option>
                <option value="value-desc">Value (High-Low)</option>
                <option value="change-desc">Change (High-Low)</option>
                <option value="total-value-desc">Total Value (High-Low)</option>
            </select>
        </div>
        <div class="prospects-list" id="prospectsList"></div>
    </div>
        </div>

        <div class="page-content explore-page">
            <!-- Search and Create Post Header -->
            <div class="search-container">
                <div class="search-bar">
                    <svg class="search-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                    </svg>
                    <input type="text" class="search-input" placeholder="Search posts and users" id="exploreSearchInput">
                    <button class="create-post-btn" id="createPostBtn">
                        + Post
                    </button>
                </div>
            </div>

            <!-- Feed Tabs -->
            <div class="feed-tabs" style="margin: 20px; display: flex; background: var(--color-background); border-radius: 12px; overflow: hidden;">
                <button class="feed-tab active" data-feed="following" style="flex: 1; padding: 12px; border: none; background: var(--color-primary); color: white; font-weight: 600; cursor: pointer;">
                    Following
                </button>
                <button class="feed-tab" data-feed="recommended" style="flex: 1; padding: 12px; border: none; background: transparent; color: var(--color-text-secondary); font-weight: 600; cursor: pointer;">
                    Recommended
                </button>
            </div>

            <!-- Posts Feed Container -->
            <div class="posts-feed" id="postsFeed" style="margin: 0 20px;">
                <!-- Posts will be dynamically inserted here -->
            </div>

            <!-- Load More Button -->
            <div class="load-more-container" style="padding: 20px; text-align: center;">
                <button class="load-more-btn" id="loadMoreBtn" style="background: var(--color-background); border: 1px solid var(--color-border); border-radius: 8px; padding: 12px 24px; color: var(--color-text); cursor: pointer; display: none;">
                    Load More Posts
                </button>
            </div>
        </div>

        <div class="page-content offers-page">
            <!-- Navigation Buttons -->
            <div class="offers-nav-container">
                <div class="offers-nav-pills">
                    <button class="pill active" data-section="athletes">View Athletes</button>
                    <button class="pill" data-section="current-offers">Current Offers</button>
                    <button class="pill" data-section="post-offer">Post Offer</button>
                </div>
            </div>

            <!-- Athletes Section -->
            <div id="athletes-section" class="offers-section active">
                <div class="search-container">
                    <div class="search-bar">
                        <svg class="search-icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                        </svg>
                        <input type="text" class="search-input" placeholder="Search athletes..." id="athletesSearchInput">
                        <img src="images/image_8b37ebf7.png" alt="Filter" class="filter-icon" id="athletesFilterBtn" style="cursor: pointer;">
                    </div>
                </div>

                <div class="card" id="athletesFilterMenu" style="margin: 0 20px 16px; display: none;">
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <select id="athleteSportFilter" class="pill" style="flex: 1; border:none;">
                            <option value="all">All Sports</option>
                            <option value="nfl">NFL</option>
                            <option value="nba">NBA</option>
                            <option value="ncaaf">NCAA Football</option>
                            <option value="ncaab">NCAA Basketball</option>
                            <option value="soccer">Soccer</option>
                            <option value="f1">F1</option>
                            <option value="tennis">Tennis</option>
                            <option value="ufc">UFC</option>
                            <option value="golf">Golf</option>
                            <option value="track">Track</option>
                            <option value="mlb">MLB</option>
                        </select>
                        <input type="number" id="athleteMinPrice" placeholder="Min Price" class="pill" style="flex: 1; border: 1px solid var(--color-border); width: 80px;">
                        <input type="number" id="athleteMaxPrice" placeholder="Max Price" class="pill" style="flex: 1; border: 1px solid var(--color-border); width: 80px;">
                        <select id="athleteSort" class="pill" style="flex: 1; border:none;">
                            <option value="default">Sort By...</option>
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="market-cap-desc">Market Cap (High-Low)</option>
                            <option value="price-desc">Price (High-Low)</option>
                        </select>
                    </div>
                </div>

                <div class="section-header">
                    <h2 class="section-title">Sports</h2>
                </div>

                <div class="sports-grid">
                    <div class="sport-item" data-sport="nfl">
                        <img src="images/sports_nfl.png" alt="NFL" class="sport-icon">
                        <span class="sport-name">NFL</span>
                    </div>
                    <div class="sport-item" data-sport="nba">
                        <img src="images/sports_nba.png" alt="NBA" class="sport-icon">
                        <span class="sport-name">NBA</span>
                    </div>
                    <div class="sport-item" data-sport="ncaaf">
                        <img src="images/sports_ncaaf.png" alt="NCAA Football" class="sport-icon">
                        <span class="sport-name">NCAA<br>Football</span>
                    </div>
                    <div class="sport-item" data-sport="ncaab">
                        <img src="images/sports_ncaab.png" alt="NCAA Basketball" class="sport-icon">
                        <span class="sport-name">NCAA<br>Basketball</span>
                    </div>
                    <div class="sport-item" data-sport="soccer">
                        <img src="images/sports_soccer.png" alt="Soccer" class="sport-icon">
                        <span class="sport-name">Soccer</span>
                    </div>
                    <div class="sport-item" data-sport="f1">
                        <img src="images/sports_f1.png" alt="F1" class="sport-icon">
                        <span class="sport-name">F1</span>
                    </div>
                </div>

                <div class="section-header">
                    <h2 class="section-title">Athletes</h2>
                </div>

                <div class="athletes-grid" id="athletesGrid">
                    <!-- Athletes will be populated here by JavaScript -->
                </div>
            </div>

            <!-- Current Offers Section -->
            <div id="current-offers-section" class="offers-section">
                <div class="search-container">
                    <div class="search-bar">
                        <svg class="search-icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                        </svg>
                        <input type="text" class="search-input" placeholder="Search offers..." id="offersSearchInput">
                        <img src="images/image_8b37ebf7.png" alt="Filter" class="filter-icon" id="offersFilterBtn" style="cursor: pointer;">
                    </div>
                </div>

                <div class="card" id="offersFilterMenu" style="margin: 0 20px 16px; display: none;">
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <select id="offerSportFilter" class="pill" style="flex: 1; border:none;">
                            <option value="all">All Sports</option>
                            <option value="nfl">NFL</option>
                            <option value="nba">NBA</option>
                            <option value="ncaaf">NCAA Football</option>
                            <option value="ncaab">NCAA Basketball</option>
                            <option value="soccer">Soccer</option>
                            <option value="f1">F1</option>
                            <option value="tennis">Tennis</option>
                            <option value="ufc">UFC</option>
                            <option value="golf">Golf</option>
                            <option value="track">Track</option>
                            <option value="mlb">MLB</option>
                        </select>
                        <input type="number" id="offerMinPrice" placeholder="Min Price" class="pill" style="flex: 1; border: 1px solid var(--color-border); width: 80px;">
                        <input type="number" id="offerMaxPrice" placeholder="Max Price" class="pill" style="flex: 1; border: 1px solid var(--color-border); width: 80px;">
                        <select id="offerSort" class="pill" style="flex: 1; border:none;">
                            <option value="default">Sort By...</option>
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="market-cap-desc">Market Cap (High-Low)</option>
                            <option value="price-desc">Price (High-Low)</option>
                        </select>
                    </div>
                </div>

                <div class="section-header">
                    <h3 class="section-subtitle">Filter offers by type:</h3>
                </div>

                <div class="pills-container">
                    <button class="pill active" data-filter="all">All Offers</button>
                    <button class="pill" data-filter="buying">Buy Offers</button>
                    <button class="pill" data-filter="selling">Sell Offers</button>
                </div>
                
                <div class="offers-list" id="offersList">
                    <!-- Offers will be populated here by JavaScript -->
                </div>
            </div>

            <!-- Post Offer Section -->
            <div id="post-offer-section" class="offers-section">
                <div class="section-header">
                    <h2 class="section-title">Post New Offer</h2>
                </div>

                <div class="card" style="margin: 0 20px 16px;">
                    <form id="postOfferForm">
                        <div class="form-group">
                            <label for="offerType">Offer Type</label>
                            <select id="offerType" class="form-input" required>
                                <option value="">Select offer type</option>
                                <option value="buying">Buying</option>
                                <option value="selling">Selling</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="offerAthlete">Athlete</label>
                            <select id="offerAthlete" class="form-input" required>
                                <option value="">Select athlete</option>
                                <!-- Athletes will be populated by JavaScript -->
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="offerQuantity">Quantity</label>
                            <input type="number" id="offerQuantity" class="form-input" min="1" required placeholder="Enter quantity">
                        </div>

                        <div class="form-group">
                            <label for="offerPrice">Price per Share</label>
                            <input type="number" id="offerPrice" class="form-input" min="0" step="0.01" required placeholder="Enter price">
                        </div>


                        <div class="form-group">
                            <button type="submit" class="btn-primary" style="width: 100%;">Post Offer</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="page-content activities-page">
            

            <div class="pills-container">
                <button class="pill active" data-filter="all">Inbox</button>
                <button class="pill" data-filter="social">Social</button>
                <button class="pill" data-filter="offers">Offers</button>
                <button class="pill" data-filter="messages">Messages</button>
            </div>

            <div id="activitiesList">
                </div>
        </div>

        <div class="page-content account-page">
            <div class="account-header">
                <img src="images/image_48fb0979.png" alt="Profile" class="account-avatar">
                <h2 class="account-username">@username</h2>
                <p class="account-name">Full Name</p>
                <p class="account-email">email@example.com</p>
            </div>

            <div class="account-stats">
                <div class="account-stat">
                    <span class="account-stat-value" id="profile-total-shares">2,405</span>
                    <span class="account-stat-label">Shares</span>
                </div>
                <div class="account-stat">
                    <span class="account-stat-value" id="profile-portfolio-value">$45.6K</span>
                    <span class="account-stat-label">Portfolio</span>
                </div>
                <div class="account-stat">
                    <span class="account-stat-value" id="profile-account-balance">$0.00</span>
                    <span class="account-stat-label">Balance</span>
                </div>
                <div class="account-stat clickable-stat" id="followers-stat" style="cursor: pointer;">
                    <span class="account-stat-value" id="account-followers-count">0</span>
                    <span class="account-stat-label">Followers</span>
                </div>
                <div class="account-stat clickable-stat" id="following-stat" style="cursor: pointer;">
                    <span class="account-stat-value" id="account-following-count">0</span>
                    <span class="account-stat-label">Following</span>
                </div>
            </div>

            <div class="account-menu">
                <div class="account-menu-item">
                    <span class="account-menu-label">Profile Settings</span>
                    <svg class="account-menu-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 5L16 12L9 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="account-menu-item">
                    <span class="account-menu-label">Payment Methods</span>
                    <svg class="account-menu-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 5L16 12L9 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="account-menu-item">
                    <span class="account-menu-label">Dark Mode</span>
                    <label class="switch">
                        <input type="checkbox" id="darkModeToggle">
                        <span class="slider round"></span>
                    </label>
                </div>
                <div class="account-menu-item" style="color: var(--color-danger);">
                    <span class="account-menu-label">Log Out</span>
                </div>
            </div>
            <div class="card">
        <h2 class="card-title">Transaction History</h2>
        <div id="transactionHistoryList"></div>
        </div>
        </div>

        <!-- User Profile Page -->
        <div class="page-content user-profile-page" id="userProfilePage" style="display: none;">
            <div class="user-profile-header">
                <button class="back-button" id="userProfileBackBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <img src="images/image_48fb0979.png" alt="Profile" class="user-profile-avatar" id="userProfileAvatar">
                <h2 class="user-profile-username" id="userProfileUsername">@username</h2>
                <p class="user-profile-name" id="userProfileName">Full Name</p>
                <div class="user-profile-actions">
                    <button class="follow-btn" id="followBtn">Follow</button>
                    <button class="message-btn" id="messageBtn">Message</button>
                </div>
            </div>

            <div class="user-profile-stats">
                <div class="user-profile-stat">
                    <span class="user-profile-stat-value" id="userProfileFollowersCount">0</span>
                    <span class="user-profile-stat-label">Followers</span>
                </div>
                <div class="user-profile-stat">
                    <span class="user-profile-stat-value" id="userProfileFollowingCount">0</span>
                    <span class="user-profile-stat-label">Following</span>
                </div>
                <div class="user-profile-stat">
                    <span class="user-profile-stat-value" id="userProfileJoinedDate">Jan 2024</span>
                    <span class="user-profile-stat-label">Joined</span>
                </div>
            </div>

            <div class="user-profile-tabs">
                <button class="user-profile-tab active" data-tab="followers">Followers</button>
                <button class="user-profile-tab" data-tab="following">Following</button>
            </div>

            <div class="user-profile-content">
                <div class="user-profile-tab-content active" id="followersTab">
                    <div class="followers-list" id="followersList">
                        <!-- Followers will be populated here -->
                    </div>
                </div>
                <div class="user-profile-tab-content" id="followingTab">
                    <div class="following-list" id="followingList">
                        <!-- Following will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="page-content leaderboard-page">
            <div class="card">
                <div class="leaderboard-header">
                    <h2 class="card-title">Leaderboard</h2>
                    <div class="leaderboard-controls">
                        <select id="timeframeSelect" class="timeframe-select">
                            <option value="daily">1 Day</option>
                            <option value="weekly">1 Week</option>
                            <option value="monthly" selected>1 Month</option>
                            <option value="yearly">1 Year</option>
                        </select>
                    </div>
                </div>
                
                <div class="leaderboard-tabs">
                    <button class="leaderboard-tab active" data-category="players">Players</button>
                    <button class="leaderboard-tab" data-category="following">Following</button>
                    <button class="leaderboard-tab" data-category="global">Global</button>
                </div>
                
                <div class="leaderboard-content">
                    <div class="leaderboard-list" id="leaderboardList"></div>
                    <div class="leaderboard-empty" id="leaderboardEmpty" style="display: none;">
                        <p>No data available for this category.</p>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="tab-bar">
    <div class="tab-item active" data-page="dashboard">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
    </div>
    <div class="tab-item" data-page="explore">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z"/>
        </svg>
    </div>
    <div class="tab-item" data-page="offers">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/>
        </svg>
    </div>
    <div class="tab-item" data-page="activities">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"/>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
    </div>
    <div class="tab-item" data-page="leaderboard">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6h-6z"/>
        </svg>
    </div>
</div>
    </div>
<div class="modal-overlay" id="modalOverlay" style="display: none;">
    <div class="modal chat-modal" id="chatModal">
    <div class="chat-header">
        <svg class="chat-back" viewBox="0 0 24 24" fill="none">
            <path d="M15 19L8 12L15 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <img class="chat-avatar" id="chatAvatar" src="" alt="">
        <div class="chat-header-info">
            <h3 class="chat-name" id="chatName"></h3>
            <span class="chat-status" id="chatStatus">Active 11m ago</span>
        </div>
        <svg class="chat-action-icon" viewBox="0 0 24 24" fill="none">
            <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <svg class="chat-action-icon" viewBox="0 0 24 24" fill="none">
            <rect x="3" y="11" width="18" height="10" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
            <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2"/>
        </svg>
    </div>
    <div class="chat-messages" id="chatMessages"></div>
    <div class="chat-input-container">
        <svg id="makeChatOfferBtn" class="chat-action-icon" style="cursor: pointer;" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 4V20M20 12L4 12" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
        </svg>
        <input type="text" class="chat-input" id="chatInput" placeholder="Message...">
        </div>
</div>
        <div id="priceHistoryModal" class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Price History</h2>
                <button class="modal-close" ></button>
            </div>
            <div class="modal-content"></div>
        </div>

        <div class="modal" id="athleteDetailModal">
            <div class="modal-header">
                <h3 class="modal-title">Athlete Details</h3>
                <button class="modal-close" ></button>
            </div>
            <div class="modal-content" id="athleteDetailContent"></div>
        </div>

        <div class="modal" id="offerModal">
            <div class="modal-header">
                <h3 class="modal-title" id="offerModalTitle">Offer</h3>
                <button class="modal-close" ></button>
            </div>
            <div class="modal-content" id="offerModalContent"></div>
        </div>

        <div class="modal" id="offerDetailsModal">
            <div class="modal-header">
                <h3 class="modal-title">Offer Details</h3>
                <button class="modal-close" ></button>
            </div>
            <div class="modal-content" id="offerDetailsContent">
                <!-- Offer details will be populated here -->
            </div>
        </div>

        <div class="modal" id="editOfferModal">
            <div class="modal-header">
                <h3 class="modal-title">Edit Offer</h3>
                <button class="modal-close" ></button>
            </div>
            <div class="modal-content" id="editOfferContent">
                <form id="editOfferForm">
                    <div class="form-group">
                        <label for="editOfferType">Offer Type</label>
                        <select id="editOfferType" class="form-input" required>
                            <option value="buying">Buying</option>
                            <option value="selling">Selling</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="editOfferAthlete">Athlete</label>
                        <input type="text" id="editOfferAthlete" class="form-input" readonly>
                    </div>

                    <div class="form-group">
                        <label for="editOfferQuantity">Quantity</label>
                        <input type="number" id="editOfferQuantity" class="form-input" min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="editOfferPrice">Price per Share</label>
                        <input type="number" id="editOfferPrice" class="form-input" min="0" step="0.01" required>
                    </div>


                    <div class="form-group">
                        <button type="submit" class="btn-primary" style="width: 100%;">Update Offer</button>
                        <button type="button" class="btn-secondary"  style="width: 100%; margin-top: 8px;">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="modal" id="profileSettingsModal">
            <div class="modal-header">
                <h3 class="modal-title">Profile Settings</h3>
                <button class="modal-close" ></button>
            </div>
            <div class="modal-content" id="profileSettingsContent">
                <div class="profile-settings-container">
                    <div class="profile-picture-section">
                        <div class="current-picture">
                            <img id="currentProfilePic" src="" alt="Profile Picture" class="profile-settings-avatar">
                            <button class="change-picture-btn" id="changePictureBtn">Change Picture</button>
                            <input type="file" id="profilePictureInput" accept="image/*" style="display: none;">
                        </div>
                    </div>
                    
                    <form id="profileSettingsForm" class="profile-settings-form">
                        <div class="form-group">
                            <label for="profileName">Name</label>
                            <input type="text" id="profileName" name="name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="profileUsername">Username</label>
                            <input type="text" id="profileUsername" name="username" required minlength="3" maxlength="20" pattern="[a-zA-Z0-9_]+" title="Username can only contain letters, numbers, and underscores">
                        </div>
                        
                        <div class="form-group">
                            <label for="profileEmail">Email</label>
                            <input type="email" id="profileEmail" name="email" required>
                        </div>
                        
                        <div class="form-group portfolio-privacy-group">
                            <label for="portfolioPrivacy">Portfolio Visibility</label>
                            <div class="privacy-setting">
                                <span class="privacy-label">Make my portfolio performance public</span>
                                <label class="switch">
                                    <input type="checkbox" id="portfolioPrivacyToggle" checked>
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            <small class="privacy-help">When enabled, your portfolio will appear on leaderboards and be visible to other users</small>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" >Cancel</button>
                            <button type="submit" class="btn-primary" id="saveProfileBtn">Save Changes</button>
                        </div>
                    </form>
                    
                    <div class="password-section">
                        <h4>Change Password</h4>
                        <form id="passwordChangeForm" class="password-form">
                            <div class="form-group">
                                <label for="currentPassword">Current Password</label>
                                <input type="password" id="currentPassword" name="currentPassword" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword">New Password</label>
                                <input type="password" id="newPassword" name="newPassword" required minlength="6">
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword">Confirm New Password</label>
                                <input type="password" id="confirmPassword" name="confirmPassword" required minlength="6">
                            </div>
                            
                            <button type="submit" class="btn-primary" id="changePasswordBtn">Change Password</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- New Message Modal -->
        <div class="modal new-message-modal" id="newMessageModal">
            <div class="modal-header">
                <h3 class="modal-title">New Message</h3>
                <button class="modal-close" onclick="closeNewMessageModal()"></button>
            </div>
            <div class="modal-content">
                <form id="newMessageForm">
                    <label for="newMessageUsername">Username</label>
                    <input type="text" id="newMessageUsername" placeholder="Enter username" required>
                    <div id="userSearchResults" class="user-search-results"></div>
                    <button type="submit">Start Conversation</button>
                </form>
            </div>
        </div>

        <!-- Followers/Following Modal -->
        <div class="modal" id="followersModal">
            <div class="modal-header">
                <h3 class="modal-title" id="followersModalTitle">Followers</h3>
                <button class="modal-close" ></button>
            </div>
            <div class="modal-content">
                <div class="followers-list" id="followersListContent">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <div class="image-modal" id="imageModal">
        <img src="" alt="Enlarged image" id="modalImage">
    </div>
    
    <!-- Login/Register Modal -->
    <div class="modal-overlay" id="authModalOverlay">
        <div class="modal auth-modal" id="authModal">
            <div class="modal-header">
                <h3 class="modal-title" id="authModalTitle">Login</h3>
                <button class="modal-close" onclick="closeAuthModal()"></button>
            </div>
            <div class="modal-content">
                <div id="loginForm">
                    <form id="loginFormElement">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required>
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required>
                        <button type="submit">Login</button>
                    </form>
                    <p style="text-align: center; margin-top: 16px;">
                        Don't have an account? 
                        <a href="#" onclick="showRegisterForm()">Register</a>
                    </p>
                </div>
                
                <div id="registerForm" style="display: none;">
                    <form id="registerFormElement">
                        <label for="registerName">Name</label>
                        <input type="text" id="registerName" required>
                        <label for="registerUsername">Username</label>
                        <input type="text" id="registerUsername" required minlength="3" maxlength="20" pattern="[a-zA-Z0-9_]+" title="Username can only contain letters, numbers, and underscores">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required>
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required minlength="6">
                        <button type="submit">Register</button>
                    </form>
                    <p style="text-align: center; margin-top: 16px;">
                        Already have an account? 
                        <a href="#" onclick="showLoginForm()">Login</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Post Modal -->
    <div class="modal-overlay" id="createPostModalOverlay" style="display: none; z-index: 2001;">
        <div class="modal" id="createPostModal" style="max-width: 500px; width: 90%; border-radius: 12px; z-index: 2002;">
            <div class="modal-header">
                <h3 class="modal-title">Create Post</h3>
                <button class="modal-close" onclick="closeCreatePostModal()"></button>
            </div>
            <div class="modal-content">
                <form id="createPostForm" enctype="multipart/form-data">
                    <div class="post-input-container" style="margin-bottom: 16px;">
                        <textarea 
                            id="postText" 
                            placeholder="What's on your mind?" 
                            maxlength="2000"
                            style="width: 100%; min-height: 120px; padding: 12px; border: 1px solid var(--color-border); border-radius: 8px; resize: vertical; font-family: inherit; font-size: 16px;"
                            required
                        ></textarea>
                        <div class="character-count" style="text-align: right; font-size: 12px; color: var(--color-text-secondary); margin-top: 4px;">
                            <span id="postCharCount">0</span>/2000
                        </div>
                    </div>
                    
                    <!-- Insert Athlete Button -->
                    <div class="insert-athlete-container" style="margin-bottom: 16px;">
                        <button 
                            type="button" 
                            id="insertAthleteBtn"
                            class="insert-athlete-btn"
                            style="background: var(--color-primary); color: white; border: none; border-radius: 6px; padding: 8px 16px; cursor: pointer; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 6px;"
                        >
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="7" r="4"/>
                                <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/>
                            </svg>
                            Insert Athlete
                        </button>
                    </div>
                    
                    <div class="media-upload-container" style="margin-bottom: 16px;">
                        <input 
                            type="file" 
                            id="postMedia" 
                            multiple 
                            accept="image/*,video/*" 
                            style="display: none;"
                        >
                        <button 
                            type="button" 
                            onclick="document.getElementById('postMedia').click()" 
                            style="background: var(--color-background); border: 2px dashed var(--color-border); border-radius: 8px; padding: 20px; width: 100%; cursor: pointer; color: var(--color-text-secondary);"
                        >
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-bottom: 8px;">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21,15 16,10 5,21"/>
                            </svg>
                            <div>Add photos or videos</div>
                            <div style="font-size: 12px; margin-top: 4px;">Up to 5 files, max 5MB each</div>
                        </button>
                        <div id="mediaPreview" style="margin-top: 12px; display: flex; flex-wrap: wrap; gap: 8px;"></div>
                    </div>
                    
                    <div class="post-options" style="margin-bottom: 16px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Visibility</label>
                        <select id="postVisibility" style="width: 100%; padding: 8px; border: 1px solid var(--color-border); border-radius: 6px;">
                            <option value="public">Public - Anyone can see</option>
                            <option value="followers">Followers only</option>
                            <option value="private">Private - Only me</option>
                        </select>
                    </div>
                    
                    <div class="modal-actions" style="display: flex; gap: 12px; justify-content: flex-end;">
                        <button type="button" onclick="closeCreatePostModal()" style="background: var(--color-background); border: 1px solid var(--color-border); border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                            Cancel
                        </button>
                        <button type="submit" id="createPostSubmit" style="background: var(--color-primary); color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer; font-weight: 600;" disabled>
                            Post
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Athlete Search Modal -->
    <div id="athleteSearchModal" class="modal-overlay">
        <div class="modal" style="max-width: 500px; max-height: 600px;">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid var(--color-border);">
                <h2 style="margin: 0; font-size: 20px; font-weight: 600;">Select Athlete</h2>
                <button onclick="closeAthleteSearchModal()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: var(--color-text-secondary);"></button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div class="search-container" style="margin-bottom: 16px;">
                    <input 
                        type="text" 
                        id="athleteSearchInput" 
                        placeholder="Search athletes..." 
                        style="width: 100%; padding: 12px; border: 1px solid var(--color-border); border-radius: 6px; font-size: 16px;"
                    >
                </div>
                <div id="athleteSearchResults" class="athlete-search-results" style="max-height: 400px; overflow-y: auto;">
                    <!-- Search results will be populated here -->
                </div>
            </div>
        </div>
    </div>

        </div> <!-- End main-content-area -->
    </div> <!-- End app-container -->
    
    <div class="chat-page" id="chatPage" style="display: none;">
      <div class="chat-header-modern">
        <button class="chat-back-btn" id="chatBackBtn" aria-label="Back" style="background: none; border: none; cursor: pointer; padding: 0 8px 0 0;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#222" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6" />
          </svg>
        </button>
        <img class="chat-avatar" id="fullScreenChatAvatar" src="" alt="">
        <div class="chat-header-info">
          <h3 class="chat-name" id="fullScreenChatName"></h3>
          <span class="chat-status" id="fullScreenChatStatus">Active 11m ago</span>
        </div>
      </div>
      <div class="chat-messages" id="fullScreenChatMessages"></div>
      <div class="chat-input-bar-modern">
        <button id="fullScreenMakeChatOfferBtn" class="chat-input-icon">+</button>
        <input type="text" class="chat-input" id="fullScreenChatInput" placeholder="Message...">
        <button id="fullScreenSendChatBtn" class="chat-input-icon">&#9658;</button>
      </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/app.js"></script>

    <!-- Add chart tooltip for portfolio graph (desktop only) -->
    <div class="chart-tooltip" id="portfolioChartTooltip"></div>

    <script>
    // ... existing code ...
    // Portfolio chart hover tooltip (desktop only)
    (function() {
        const chart = document.querySelector('.chart-container');
        const tooltip = document.getElementById('portfolioChartTooltip');
        if (chart && tooltip) {
            chart.addEventListener('mousemove', function(e) {
                if (window.innerWidth < 1024) { tooltip.style.display = 'none'; return; }
                const rect = chart.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                // Find nearest data point (assume data is available globally as portfolioChartData)
                if (window.portfolioChartData && Array.isArray(window.portfolioChartData)) {
                    const w = rect.width;
                    const idx = Math.round((x / w) * (window.portfolioChartData.length - 1));
                    const point = window.portfolioChartData[idx];
                    if (point) {
                        tooltip.innerHTML = `<strong>${point.label || ''}</strong><br/>$${point.value.toFixed(2)}`;
                        tooltip.style.left = (x + 20) + 'px';
                        tooltip.style.top = (y - 10) + 'px';
                        tooltip.style.display = 'block';
                    } else {
                        tooltip.style.display = 'none';
                    }
                }
            });
            chart.addEventListener('mouseleave', function() {
                tooltip.style.display = 'none';
            });
        }
    })();
    // ... existing code ...
    </script>

    
</body>
</html>